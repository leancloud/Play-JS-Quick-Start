(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.play={})})(this,function(e){"use strict";var Z=Math.min,ee=Math.round,te=Math.abs;function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t){return t={exports:{}},e(t,t.exports),t.exports}/**
	 * Initialize a new `RequestBase`.
	 *
	 * @api public
	 */function r(e){if(e)return n(e)}/**
	 * Mixin the prototype properties.
	 *
	 * @param {Object} obj
	 * @return {Object}
	 * @api private
	 */function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}/**
	 * Clear previous timeout.
	 *
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Initialize a new `ResponseBase`.
	 *
	 * @api public
	 */function s(e){if(e)return a(e)}/**
	 * Mixin the prototype properties.
	 *
	 * @param {Object} obj
	 * @return {Object}
	 * @api private
	 */function a(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}/**
	 * Get case-insensitive `field` value.
	 *
	 * @param {String} field
	 * @return {String}
	 * @api public
	 */function l(){this._defaults=[]}/**
	 * Parse the given `str` and return milliseconds.
	 *
	 * @param {String} str
	 * @return {Number}
	 * @api private
	 */function p(e){if(e+="",!(100<e.length)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?31557600000*o:"weeks"===r||"week"===r||"w"===r?604800000*o:"days"===r||"day"===r||"d"===r?86400000*o:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?3600000*o:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?60000*o:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1000*o:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?o:void 0}}}/**
	 * Short format for `ms`.
	 *
	 * @param {Number} ms
	 * @return {String}
	 * @api private
	 */function c(e){var t=te(e);return 86400000<=t?ee(e/86400000)+"d":3600000<=t?ee(e/3600000)+"h":60000<=t?ee(e/60000)+"m":1000<=t?ee(e/1000)+"s":e+"ms"}/**
	 * Long format for `ms`.
	 *
	 * @param {Number} ms
	 * @return {String}
	 * @api private
	 */function _(e){var t=te(e);return 86400000<=t?u(e,t,86400000,"day"):3600000<=t?u(e,t,3600000,"hour"):60000<=t?u(e,t,60000,"minute"):1000<=t?u(e,t,1000,"second"):e+" ms"}/**
	 * Pluralization helper.
	 */function u(e,t,o,r){return ee(e/o)+" "+r+(t>=1.5*o?"s":"")}/**
	 * This is the common logic for both the Node.js and web browser
	 * implementations of `debug()`.
	 */ /**
	   * 调试输出
	   * @param {String} log
	   */function m(e){Yr[Br.Debug]("[DEBUG] "+e)}/**
	   * 警告输出
	   * @param {String} log
	   */function y(e){Yr[Br.Warn]("[WARN] "+e)}/**
	   * 错误输出
	   * @param {String} log
	   */function g(e){Yr[Br.Error]("[ERROR] "+e)}function b(e,t){g("error: "+de(t)),e.emit(Tr.ERROR,{code:t.reasonCode,detail:t.detail})}function C(e,t){var o=t.reasonCode,r=t.detail;g("reasonCode: "+o+", detail: "+r),e.emit(Tr.ERROR,{code:o,detail:r})}/**
	 * 连接状态
	 */ // 连接建立
function O(e,t){var o=this;if(t.reasonCode)e._closeLobbySocket(function(){e._playState=Hr.CLOSED;var r=t.reasonCode,n=t.detail;o.emit(Tr.CONNECT_FAILED,{code:r,detail:n})});else{e._playState=Hr.LOBBY_OPEN,e._sessionToken=t.st;var r=new kr(e);r._userId=e.userId,e._player=r,e._gameToLobby?(e.emit(Tr.ROOM_LEFT),e._gameToLobby=!1):e.emit(Tr.CONNECTED)}}// 加入大厅
function h(e,t){t.reasonCode?C(e,t):(e._inLobby=!0,e.emit(Tr.LOBBY_JOINED))}// 离开大厅
function E(e){e._inLobby=!1,e.emit(Tr.LOBBY_LEFT)}// 房间列表更新
function S(e,t){e._lobbyRoomList=[];for(var o,r=0;r<t.list.length;r+=1)o=t.list[r],e._lobbyRoomList[r]=new vr(o);e.emit(Tr.LOBBY_ROOM_LIST_UPDATED)}function T(e,t){e._inLobby&&(e._inLobby=!1,e.emit(Tr.LOBBY_LEFT)),e._gameServer=t.addr||t.secureAddr,t.cid&&(e._cachedRoomMsg.cid=t.cid),e._connectToGame()}// 创建房间
function v(e,t){t.reasonCode?e.emit(Tr.ROOM_CREATE_FAILED,{code:t.reasonCode,detail:t.detail}):(e._cachedRoomMsg.op="start",T(e,t))}// 加入房间
/* eslint no-param-reassign: ["error", { "props": false }] */function P(e,t){t.reasonCode?e.emit(Tr.ROOM_JOIN_FAILED,{code:t.reasonCode,detail:t.detail}):(e._cachedRoomMsg.op="add",T(e,t))}// 大厅消息处理
function R(e,t){var o=JSON.parse(t.data);switch(m(e.userId+" Lobby msg: "+o.op+" \n<- "+t.data),o.cmd){case"session":switch(o.op){case"opened":O(e,o);break;default:g("no handler for lobby msg: "+o.op);}break;case"lobby":switch(o.op){case"added":h(e,o);break;case"room-list":S(e,o);break;case"remove":E(e);break;default:g("no handler for lobby msg: "+o.op);}break;case"statistic":break;case"conv":switch(o.op){case"results":S(e,o);break;case"started":v(e,o);break;case"added":P(e,o);break;case"random-added":P(e,o);break;default:g("no handler for lobby msg: "+o.op);}break;case"events":// TODO
break;case"error":b(e,o);break;default:o.cmd&&g("no handler for lobby msg: "+o.cmd);}}// 连接建立后创建 / 加入房间
function I(e,t){t.reasonCode?(e._playState=Hr.LOBBY_OPEN,e._closeGameSocket(function(){C(e,t)})):(e._cachedRoomMsg.i=e._getMsgId(),e._sendGameMessage(e._cachedRoomMsg))}function M(e){// 收到 closed 协议后，客户端主动断开连接
e._closeGameSocket()}// 创建房间
function L(e,t){t.reasonCode?(e._playState=Hr.LOBBY_OPEN,e._closeGameSocket(function(){e.emit(Tr.ROOM_CREATE_FAILED,{code:t.reasonCode,detail:t.detail})})):(e._playState=Hr.GAME_OPEN,e._room=zr._newFromJSONObject(e,t),e.emit(Tr.ROOM_CREATED),e.emit(Tr.ROOM_JOINED),e._closeLobbySocket())}// 加入房间
function x(e,t){t.reasonCode?(e._playState=Hr.LOBBY_OPEN,e._closeGameSocket(function(){e.emit(Tr.ROOM_JOIN_FAILED,{code:t.reasonCode,detail:t.detail})})):(e._playState=Hr.GAME_OPEN,e._room=zr._newFromJSONObject(e,t),e.emit(Tr.ROOM_JOINED),e._closeLobbySocket())}// 有新玩家加入房间
function N(e,t){var o=kr._newFromJSONObject(e,t.member);e._room._addPlayer(o),e.emit(Tr.PLAYER_ROOM_JOINED,{newPlayer:o})}// 有玩家离开房间
function A(e,t){if(t.reasonCode)C(e,t);else{var o=t.initByActor,r=e._room.getPlayer(o);e._room._removePlayer(o),e.emit(Tr.PLAYER_ROOM_LEFT,{leftPlayer:r})}}// 主机切换应答
function F(e,t){t.reasonCode&&C(e,t)}// 主机切换
function D(e,t){if(t.reasonCode)C(e,t);else if(null===t.masterActorId)e._room._masterActorId=-1,e.emit(Tr.MASTER_SWITCHED,{newMaster:null});else{e._room._masterActorId=t.masterActorId;var o=e._room.getPlayer(t.masterActorId);e.emit(Tr.MASTER_SWITCHED,{newMaster:o})}}function w(e,t){t.reasonCode&&C(e,t)}// 房间开启 / 关闭
function G(e,t){var o=t.toggle;e._room._opened=o,e.emit(Tr.ROOM_OPEN_CHANGED,{opened:o})}function B(e,t){t.reasonCode&&C(e,t)}// 房间是否可见
function Y(e,t){var o=t.toggle;e._room._visible=o,e.emit(Tr.ROOM_VISIBLE_CHANGED,{visible:o})}// 房间属性变更应答
function H(e,t){t.reasonCode&&C(e,t)}// 房间属性变更
function W(e,t){var o=t.attr;e._room._mergeProperties(o),e.emit(Tr.ROOM_CUSTOM_PROPERTIES_CHANGED,{changedProps:o})}// 玩家属性变更应答
function q(e,t){t.reasonCode&&C(e,t)}// 玩家属性变更
function V(e,t){var o=e._room.getPlayer(t.actorId);o._mergeProperties(t.attr),e.emit(Tr.PLAYER_CUSTOM_PROPERTIES_CHANGED,{player:o,changedProps:t.attr})}// 玩家下线
function U(e,t){var o=e._room.getPlayer(t.initByActor);o._setActive(!1),e.emit(Tr.PLAYER_ACTIVITY_CHANGED,{player:o})}// 玩家上线
function J(e,t){var o=e._room.getPlayer(t.member.actorId);o._initWithJSONObject(t.member),o._setActive(!0),e.emit(Tr.PLAYER_ACTIVITY_CHANGED,{player:o})}// 离开房间
/* eslint no-param-reassign: ["error", { "props": false }] */function z(e){// 清理工作
// 离开房间时就主动断开连接
e._room=null,e._player=null,e._closeGameSocket(function(){e._connectToMaster(!0)})}// 自定义事件
function $(e,t){e.emit(Tr.CUSTOM_EVENT,{eventId:t.eventId,eventData:t.msg,senderId:t.fromActorId})}function K(e,t){var o=JSON.parse(t.data);switch(m(e.userId+" Game  msg: "+o.op+" \n<- "+t.data),o.cmd){case"session":switch(o.op){case"opened":I(e,o);break;case"closed":M(e);break;default:g("no handler for op: "+o.op);}break;case"conv":switch(o.op){case"started":L(e,o);break;case"added":x(e,o);break;case"members-joined":N(e,o);break;case"members-left":A(e,o);break;case"master-client-updated":F(e,o);break;case"master-client-changed":D(e,o);break;case"opened":w(e,o);break;case"opened-notify":G(e,o);break;case"visible":B(e,o);break;case"visible-notify":Y(e,o);break;case"updated":H(e,o);break;case"updated-notify":W(e,o);break;case"player-prop-updated":q(e,o);break;case"player-props":V(e,o);break;case"members-offline":U(e,o);break;case"members-online":J(e,o);break;case"removed":z(e);break;default:g("no handler for game msg: "+o.op);}break;case"direct":$(e,o);break;case"ack":// ignore
break;case"events":// TODO
break;case"error":b(e,o);break;default:o.cmd&&g("no handler for cmd: "+t.data);}}function X(e){var t={};return e.opened||(t.open=e.opened),e.visible||(t.visible=e.visible),0<e.emptyRoomTtl&&(t.emptyRoomTtl=e.emptyRoomTtl),0<e.playerTtl&&(t.playerTtl=e.playerTtl),0<e.maxPlayerCount&&10>e.maxPlayerCount&&(t.maxMembers=e.maxPlayerCount),e.customRoomProperties&&(t.attr=e.customRoomProperties),e.customRoomPropertyKeysForLobby&&(t.lobbyAttrKeys=e.customRoomPropertyKeysForLobby),e.flag&&(t.flag=e.flag),t}function Q(e,t){var o=e;if(o){o.onopen=null,o.onconnect=null,o.onmessage=null,o.onclose=t;try{o.close()}catch(t){m("close socket exception: "+t)}}else t&&t()}/**
	   * Play 客户端类
	   */var oe="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,re=o(function(e){var t=e.exports={version:"2.6.0"};"number"==typeof __e&&(__e=t)}),ne=re.version,se=re.JSON||(re.JSON={stringify:JSON.stringify}),ae=function(){// eslint-disable-line no-unused-vars
return se.stringify.apply(se,arguments)},ie=o(function(e){e.exports={default:ae,__esModule:!0}}),de=t(ie),le=Math.ceil,pe=Math.floor,ce=function(e){return isNaN(e=+e)?0:(0<e?pe:le)(e)},_e=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},ue=o(function(e){// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self// eslint-disable-next-line no-new-func
:Function("return this")();"number"==typeof __g&&(__g=t)}),me=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},ye=function(e,t,o){return(me(e),void 0===t)?e:1===o?function(o){return e.call(t,o)}:2===o?function(o,r){return e.call(t,o,r)}:3===o?function(o,r,n){return e.call(t,o,r,n)}:function()/* ...args */{return e.apply(t,arguments)}},ge=function(e){return"object"==typeof e?null!==e:"function"==typeof e},fe=function(e){if(!ge(e))throw TypeError(e+" is not an object!");return e},be=function(e){try{return!!e()}catch(t){return!0}},Ce=!be(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Oe=ue.document,he=ge(Oe)&&ge(Oe.createElement),Ee=function(e){return he?Oe.createElement(e):{}},Se=!Ce&&!be(function(){return 7!=Object.defineProperty(Ee("div"),"a",{get:function(){return 7}}).a}),Te=function(e,t){if(!ge(e))return e;var o,r;if(t&&"function"==typeof(o=e.toString)&&!ge(r=o.call(e)))return r;if("function"==typeof(o=e.valueOf)&&!ge(r=o.call(e)))return r;if(!t&&"function"==typeof(o=e.toString)&&!ge(r=o.call(e)))return r;throw TypeError("Can't convert object to primitive value")},ke=Object.defineProperty,ve=Ce?Object.defineProperty:function(e,t,o){if(fe(e),t=Te(t,!0),fe(o),Se)try{return ke(e,t,o)}catch(t){/* empty */}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e},f={f:ve},Pe=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Re=Ce?function(e,t,o){return f.f(e,t,Pe(1,o))}:function(e,t,o){return e[t]=o,e},Ie={}.hasOwnProperty,Me=function(e,t){return Ie.call(e,t)},Le="prototype",xe=function(e,t,o){var r,n,s,a=e&xe.F,i=e&xe.G,d=e&xe.S,l=e&xe.P,p=e&xe.B,c=e&xe.W,_=i?re:re[t]||(re[t]={}),u=_[Le],m=i?ue:d?ue[t]:(ue[t]||{})[Le];for(r in i&&(o=t),o)// contains in native
n=!a&&m&&void 0!==m[r],n&&Me(_,r)||(s=n?m[r]:o[r],_[r]=i&&"function"!=typeof m[r]?o[r]// bind timers to global for call from export context
:p&&n?ye(s,ue)// wrap global constructors for prevent change them in library
:c&&m[r]==s?function(e){var t=function(t,o,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,o);}return new e(t,o,r)}return e.apply(this,arguments)};return t[Le]=e[Le],t;// make static versions for prototype methods
}(s):l&&"function"==typeof s?ye(Function.call,s):s,l&&((_.virtual||(_.virtual={}))[r]=s,e&xe.R&&u&&!u[r]&&Re(u,r,s)))};xe.F=1,xe.G=2,xe.S=4,xe.P=8,xe.B=16,xe.W=32,xe.U=64,xe.R=128;// real proto method for `library`
var Ne=xe,Ae=Re,Fe={}.toString,De=function(e){return Fe.call(e).slice(8,-1)},we=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==De(e)?e.split(""):Object(e)},je=function(e){return we(_e(e))},Ge=function(e){return 0<e?Z(ce(e),9007199254740991):0;// pow(2, 53) - 1 == 9007199254740991
},Be=Math.max,Ye=function(e,t){return e=ce(e),0>e?Be(e+t,0):Z(e,t)},He=o(function(e){var t=ue["__core-js_shared__"]||(ue["__core-js_shared__"]={});(e.exports=function(e,o){return t[e]||(t[e]=o===void 0?{}:o)})("versions",[]).push({version:re.version,mode:"pure",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})}),We=0,qe=Math.random(),Ve=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++We+qe).toString(36))},Ue=He("keys"),Je=function(e){return Ue[e]||(Ue[e]=Ve(e))},ze=function(e){return function(t,o,r){var n,s=je(t),a=Ge(s.length),i=Ye(r,a);// Array#includes uses SameValueZero equality algorithm
// eslint-disable-next-line no-self-compare
if(e&&o!=o){for(;a>i;)// eslint-disable-next-line no-self-compare
if(n=s[i++],n!=n)return!0;// Array#indexOf ignores holes, Array#includes - not
}else for(;a>i;i++)if((e||i in s)&&s[i]===o)return e||i||0;return!e&&-1}}(!1),$e=Je("IE_PROTO"),Ke=function(e,t){var o,r=je(e),n=0,s=[];for(o in r)o!=$e&&Me(r,o)&&s.push(o);// Don't enum bug & hidden keys
for(;t.length>n;)Me(r,o=t[n++])&&(~ze(s,o)||s.push(o));return s},Xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qe=Object.keys||function(e){return Ke(e,Xe)},Ze=Ce?Object.defineProperties:function(e,t){fe(e);for(var o,r=Qe(t),n=r.length,s=0;n>s;)f.f(e,o=r[s++],t[o]);return e},et=ue.document,tt=et&&et.documentElement,ot=Je("IE_PROTO"),rt=function(){/* empty */},nt="prototype",st=function(){// Thrash, waste and sodomy: IE GC bug
var e,t=Ee("iframe"),o=Xe.length,r="<",n=">";for(t.style.display="none",tt.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+n+"document.F=Object"+r+"/script"+n),e.close(),st=e.F;o--;)delete st[nt][Xe[o]];return st()},at=Object.create||function(e,t){var o;return null===e?o=st():(rt[nt]=fe(e),o=new rt,rt[nt]=null,o[ot]=e),void 0===t?o:Ze(o,t)},it=o(function(e){var t=He("wks"),o=ue.Symbol,r="function"==typeof o,n=e.exports=function(e){return t[e]||(t[e]=r&&o[e]||(r?o:Ve)("Symbol."+e))};n.store=t}),dt=f.f,lt=it("toStringTag"),pt=function(e,t,o){e&&!Me(e=o?e:e.prototype,lt)&&dt(e,lt,{configurable:!0,value:t})},ct={};Re(ct,it("iterator"),function(){return this});var _t=function(e,t,o){e.prototype=at(ct,{next:Pe(1,o)}),pt(e,t+" Iterator")},ut=function(e){return Object(_e(e))},mt=Je("IE_PROTO"),yt=Object.prototype,gt=Object.getPrototypeOf||function(e){return e=ut(e),Me(e,mt)?e[mt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?yt:null},ft=it("iterator"),bt=!([].keys&&"next"in[].keys()),Ct="keys",Ot="values",ht=function(e,t,o,r,n,s,a){_t(o,t,r);var i,d,l,p=function(e){return!bt&&e in u?u[e]:e===Ct?function(){return new o(this,e)}:e===Ot?function(){return new o(this,e)}:function(){return new o(this,e)}},c=n==Ot,_=!1,u=e.prototype,m=u[ft]||u["@@iterator"]||n&&u[n],y=m||p(n),g=n?c?p("entries"):y:void 0,f="Array"==t?u.entries||m:m;if(f&&(l=gt(f.call(new e)),l!==Object.prototype&&l.next&&pt(l,t+" Iterator",!0)),c&&m&&m.name!==Ot&&(_=!0,y=function(){return m.call(this)}),a&&(bt||_||!u[ft])&&Re(u,ft,y),n)if(i={values:c?y:p(Ot),keys:s?y:p(Ct),entries:g},a)for(d in i)d in u||Ae(u,d,i[d]);else Ne(Ne.P+Ne.F*(bt||_),t,i);return i},Et=function(e){return function(t,o){var r,n,d=_e(t)+"",s=ce(o),i=d.length;return 0>s||s>=i?e?"":void 0:(r=d.charCodeAt(s),55296>r||56319<r||s+1===i||56320>(n=d.charCodeAt(s+1))||57343<n?e?d.charAt(s):r:e?d.slice(s,s+2):(r-55296<<10)+(n-56320)+65536)}}(!0);// 7.1.13 ToObject(argument)
ht(String,"String",function(e){// target
this._t=e+"",this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=Et(t,o),this._i+=e.length,{value:e,done:!1})});for(var St=function(e,t){return{value:t,done:!!e}},Tt=ht(Array,"Array",function(e,t){// target
// next index
this._t=je(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,St(1)):"keys"==t?St(0,o):"values"==t?St(0,e[o]):St(0,[o,e[o]])},"values"),kt=it("toStringTag"),vt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Pt=0;Pt<vt.length;Pt++){var Rt=vt[Pt],It=ue[Rt],Mt=It&&It.prototype;Mt&&!Mt[kt]&&Re(Mt,kt,Rt)}var Lt={f:it},xt=Lt.f("iterator"),Nt=o(function(e){e.exports={default:xt,__esModule:!0}});t(Nt);var At=o(function(e){var t=Ve("meta"),o=f.f,r=0,n=Object.isExtensible||function(){return!0},s=!be(function(){return n(Object.preventExtensions({}))}),a=function(e){o(e,t,{value:{i:"O"+ ++r,// object ID
w:{}// weak collections IDs
}})},i=e.exports={KEY:t,NEED:!1,fastKey:function(e,o){// return primitive with prefix
if(!ge(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Me(e,t)){// can't set metadata to uncaught frozen object
if(!n(e))return"F";// not necessary to add metadata
if(!o)return"E";// add missing metadata
a(e)}return e[t].i},getWeak:function(e,o){if(!Me(e,t)){// can't set metadata to uncaught frozen object
if(!n(e))return!0;// not necessary to add metadata
if(!o)return!1;// add missing metadata
a(e)}return e[t].w},onFreeze:function(e){return s&&i.NEED&&n(e)&&!Me(e,t)&&a(e),e}}}),Ft=At.KEY,Dt=At.NEED,wt=At.fastKey,jt=At.getWeak,Gt=At.onFreeze,Bt=f.f,Yt=function(e){var t=re.Symbol||(re.Symbol={});"_"==e.charAt(0)||e in t||Bt(t,e,{value:Lt.f(e)})},Ht=Object.getOwnPropertySymbols,Wt={f:Ht},qt={}.propertyIsEnumerable,Vt={f:qt},Ut=function(e){var t=Qe(e),o=Wt.f;if(o)for(var r,n=o(e),s=Vt.f,a=0;n.length>a;)s.call(e,r=n[a++])&&t.push(r);return t},Jt=Array.isArray||function(e){return"Array"==De(e)},zt=Xe.concat("length","prototype"),$t=Object.getOwnPropertyNames||function(e){return Ke(e,zt)},Kt={f:$t},Xt=Kt.f,Qt={}.toString,Zt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],eo=function(e){try{return Xt(e)}catch(t){return Zt.slice()}},to={f:function(e){return Zt&&"[object Window]"==Qt.call(e)?eo(e):Xt(je(e))}},oo=Object.getOwnPropertyDescriptor,ro=Ce?oo:function(e,t){if(e=je(e),t=Te(t,!0),Se)try{return oo(e,t)}catch(t){/* empty */}return Me(e,t)?Pe(!Vt.f.call(e,t),e[t]):void 0},no={f:ro},so=At.KEY,ao=no.f,io=f.f,lo=to.f,po=ue.Symbol,co=ue.JSON,_o=co&&co.stringify,uo="prototype",mo=it("_hidden"),yo=it("toPrimitive"),go={}.propertyIsEnumerable,fo=He("symbol-registry"),bo=He("symbols"),Co=He("op-symbols"),Oo=Object[uo],ho="function"==typeof po,Eo=ue.QObject,So=!Eo||!Eo[uo]||!Eo[uo].findChild,To=Ce&&be(function(){return 7!=at(io({},"a",{get:function(){return io(this,"a",{value:7}).a}})).a})?function(e,t,o){var r=ao(Oo,t);r&&delete Oo[t],io(e,t,o),r&&e!==Oo&&io(Oo,t,r)}:io,ko=function(e){var t=bo[e]=at(po[uo]);return t._k=e,t},vo=ho&&"symbol"==typeof po.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof po},Po=function(e,t,o){return e===Oo&&Po(Co,t,o),fe(e),t=Te(t,!0),fe(o),Me(bo,t)?(o.enumerable?(Me(e,mo)&&e[mo][t]&&(e[mo][t]=!1),o=at(o,{enumerable:Pe(0,!1)})):(!Me(e,mo)&&io(e,mo,Pe(1,{})),e[mo][t]=!0),To(e,t,o)):io(e,t,o)},Ro=function(e,t){fe(e);for(var o,r=Ut(t=je(t)),n=0,s=r.length;s>n;)Po(e,o=r[n++],t[o]);return e},Io=function(e){var t=go.call(this,e=Te(e,!0));return(this!==Oo||!Me(bo,e)||Me(Co,e))&&(!(t||!Me(this,e)||!Me(bo,e)||Me(this,mo)&&this[mo][e])||t)},Mo=function(e,t){if(e=je(e),t=Te(t,!0),e!==Oo||!Me(bo,t)||Me(Co,t)){var o=ao(e,t);return o&&Me(bo,t)&&!(Me(e,mo)&&e[mo][t])&&(o.enumerable=!0),o}},Lo=function(e){for(var t,o=lo(je(e)),r=[],n=0;o.length>n;)Me(bo,t=o[n++])||t==mo||t==so||r.push(t);return r},xo=function(e){for(var t,o=e===Oo,r=lo(o?Co:je(e)),n=[],s=0;r.length>s;)Me(bo,t=r[s++])&&(!o||Me(Oo,t))&&n.push(bo[t]);return n};ho||(po=function(){if(this instanceof po)throw TypeError("Symbol is not a constructor!");var e=Ve(0<arguments.length?arguments[0]:void 0),t=function(o){this===Oo&&t.call(Co,o),Me(this,mo)&&Me(this[mo],e)&&(this[mo][e]=!1),To(this,e,Pe(1,o))};return Ce&&So&&To(Oo,e,{configurable:!0,set:t}),ko(e)},Ae(po[uo],"toString",function(){return this._k}),no.f=Mo,f.f=Po,Kt.f=to.f=Lo,Vt.f=Io,Wt.f=xo,Ce&&!!0&&Ae(Oo,"propertyIsEnumerable",Io,!0),Lt.f=function(e){return ko(it(e))}),Ne(Ne.G+Ne.W+Ne.F*!ho,{Symbol:po});for(var No=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],Ao=0;No.length>Ao;)it(No[Ao++]);for(var Fo=Qe(it.store),Do=0;Fo.length>Do;)Yt(Fo[Do++]);Ne(Ne.S+Ne.F*!ho,"Symbol",{// 19.4.2.1 Symbol.for(key)
for:function(e){return Me(fo,e+="")?fo[e]:fo[e]=po(e)},// 19.4.2.5 Symbol.keyFor(sym)
keyFor:function(e){if(!vo(e))throw TypeError(e+" is not a symbol!");for(var t in fo)if(fo[t]===e)return t},useSetter:function(){So=!0},useSimple:function(){So=!1}}),Ne(Ne.S+Ne.F*!ho,"Object",{// 19.1.2.2 Object.create(O [, Properties])
create:function(e,t){return t===void 0?at(e):Ro(at(e),t)},// 19.1.2.4 Object.defineProperty(O, P, Attributes)
defineProperty:Po,// 19.1.2.3 Object.defineProperties(O, Properties)
defineProperties:Ro,// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
getOwnPropertyDescriptor:Mo,// 19.1.2.7 Object.getOwnPropertyNames(O)
getOwnPropertyNames:Lo,// 19.1.2.8 Object.getOwnPropertySymbols(O)
getOwnPropertySymbols:xo}),co&&Ne(Ne.S+Ne.F*(!ho||be(function(){var e=po();// MS Edge converts symbol values to JSON as {}
// WebKit converts symbol values to JSON as null
// V8 throws on boxed symbols
return"[null]"!=_o([e])||"{}"!=_o({a:e})||"{}"!=_o(Object(e))})),"JSON",{stringify:function(e){for(var t,o,r=[e],n=1;arguments.length>n;)r.push(arguments[n++]);if(o=t=r[1],(ge(t)||void 0!==e)&&!vo(e))return Jt(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!vo(t))return t}),r[1]=t,_o.apply(co,r);// IE8 returns string on undefined
}}),po[uo][yo]||Re(po[uo],yo,po[uo].valueOf),pt(po,"Symbol"),pt(Math,"Math",!0),pt(ue.JSON,"JSON",!0);var wo=/*#__PURE__*/Object.freeze({});Yt("asyncIterator"),Yt("observable"),function(e){return e&&e.default||e}(wo);var jo=re.Symbol,Go=o(function(e){e.exports={default:jo,__esModule:!0}});t(Go);var Bo=o(function(e,t){function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=o(Nt),n=o(Go),s="function"==typeof n.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};t.default="function"==typeof n.default&&"symbol"===s(r.default)?function(e){return"undefined"==typeof e?"undefined":s(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":"undefined"==typeof e?"undefined":s(e)}}),Yo=t(Bo),Ho=Object.assign,Wo=!Ho||be(function(){var e={},t={},o=Symbol(),r="abcdefghijklmnopqrst";return e[o]=7,r.split("").forEach(function(e){t[e]=e}),7!=Ho({},e)[o]||Object.keys(Ho({},t)).join("")!=r})?function(e){// eslint-disable-line no-unused-vars
for(var t=ut(e),o=arguments.length,r=1,n=Wt.f,s=Vt.f;o>r;)for(var a,i=we(arguments[r++]),d=n?Qe(i).concat(n(i)):Qe(i),l=d.length,p=0;l>p;)s.call(i,a=d[p++])&&(t[a]=i[a]);return t}:Ho;Ne(Ne.S+Ne.F,"Object",{assign:Wo});var qo=re.Object.assign,Vo=o(function(e){e.exports={default:qo,__esModule:!0}}),Uo=t(Vo);(function(e,t){var o=(re.Object||{})[e]||Object[e],r={};r[e]=t(o),Ne(Ne.S+Ne.F*be(function(){o(1)}),"Object",r)})("getPrototypeOf",function(){return function(e){return gt(ut(e))}});var Jo=re.Object.getPrototypeOf,zo=o(function(e){e.exports={default:Jo,__esModule:!0}}),$o=t(zo),Ko=o(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}),Xo=t(Ko);Ne(Ne.S+Ne.F*!Ce,"Object",{defineProperty:f.f});var Qo=re.Object,Zo=function(e,t,o){return Qo.defineProperty(e,t,o)},er=o(function(e){e.exports={default:Zo,__esModule:!0}});t(er);var tr=o(function(e,t){t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(er);t.default=function(){function e(e,t){for(var r,n=0;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()}),or=t(tr),rr=o(function(e,t){t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(Bo);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"===("undefined"==typeof t?"undefined":(0,o.default)(t))||"function"==typeof t)?t:e}}),nr=t(rr),sr=function(e,t){if(fe(e),!ge(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},ar={set:Object.setPrototypeOf||("__proto__"in{}?// eslint-disable-line
function(e,t,o){try{o=ye(Function.call,no.f(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,r){return sr(e,r),t?e.__proto__=r:o(e,r),e}}({},!1):void 0),check:sr};Ne(Ne.S,"Object",{setPrototypeOf:ar.set});var ir=re.Object.setPrototypeOf,dr=o(function(e){e.exports={default:ir,__esModule:!0}});t(dr),Ne(Ne.S,"Object",{create:at});var lr=re.Object,pr=function(e,t){return lr.create(e,t)},cr=o(function(e){e.exports={default:pr,__esModule:!0}});t(cr);var _r=o(function(e,t){function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=o(dr),n=o(cr),s=o(Bo);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,s.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}}),ur=t(_r),mr=o(function(e){/**
	 * Initialize a new `Emitter`.
	 *
	 * @api public
	 */function t(e){if(e)return o(e)}/**
	 * Mixin the emitter properties.
	 *
	 * @param {Object} obj
	 * @return {Object}
	 * @api private
	 */function o(e){for(var o in t.prototype)e[o]=t.prototype[o];return e}/**
	 * Listen on the given `event` with `fn`.
	 *
	 * @param {String} event
	 * @param {Function} fn
	 * @return {Emitter}
	 * @api public
	 */ /**
	 * Adds an `event` listener that will be invoked a single
	 * time then automatically removed.
	 *
	 * @param {String} event
	 * @param {Function} fn
	 * @return {Emitter}
	 * @api public
	 */ /**
	 * Remove the given callback for `event` or all
	 * registered callbacks.
	 *
	 * @param {String} event
	 * @param {Function} fn
	 * @return {Emitter}
	 * @api public
	 */ /**
	 * Emit `event` with the given args.
	 *
	 * @param {String} event
	 * @param {Mixed} ...
	 * @return {Emitter}
	 */ /**
	 * Return array of callbacks for `event`.
	 *
	 * @param {String} event
	 * @return {Array}
	 * @api public
	 */ /**
	 * Check if this emitter has `event` handlers.
	 *
	 * @param {String} event
	 * @return {Boolean}
	 * @api public
	 */e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function o(){this.off(e,o),t.apply(this,arguments)}return o.fn=t,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){// all
if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;// specific event
var o=this._callbacks["$"+e];if(!o)return this;// remove all handlers
if(1==arguments.length)return delete this._callbacks["$"+e],this;// remove specific handler
for(var r,n=0;n<o.length;n++)if(r=o[n],r===t||r.fn===t){o.splice(n,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),o=this._callbacks["$"+e];if(o){o=o.slice(0);for(var r=0,n=o.length;r<n;++r)o[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),yr=/**
	 * Check if `obj` is an object.
	 *
	 * @param {Object} obj
	 * @return {Boolean}
	 * @api private
	 */function(e){return null!==e&&"object"==typeof e};r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)"deadline"==t?this._timeout=e.deadline:"response"==t?this._responseTimeout=e.response:console.warn("Unknown timeout option",t);return this},r.prototype.retry=function(e,t){return(0===arguments.length||!0===e)&&(e=1),0>=e&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var gr=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];/**
	 * Determine if a request should be retried.
	 * (Borrowed from segmentio/superagent-retry)
	 *
	 * @param {Error} err
	 * @param {Response} [res]
	 * @returns {Boolean}
	 */r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var o=this._retryCallback(e,t);if(!0===o)return!0;if(!1===o)return!1;// undefined falls back to defaults
}catch(t){console.error(t)}if(t&&t.status&&500<=t.status&&501!=t.status)return!0;if(e){if(e.code&&~gr.indexOf(e.code))return!0;// Superagent timeout
if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var o=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){o.end(function(o,r){o?t(o):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype["catch"]=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):200<=e.status&&300>e.status)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(yr(e)){for(var o in e)this.set(o,e[o]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){// name should be either a string or an object.
if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),yr(e)){for(var o in e)this.field(o,e[o]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}// val should be defined now
if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(e,t,o,r){switch(o.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e);}return this},r.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=yr(e),o=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:!this._isHost(e)&&(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");// merge
if(t&&yr(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(o||this.type("form"),o=this._header["content-type"],this._data="application/x-www-form-urlencoded"==o?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(o||this.type("json"),this);// default to json
},r.prototype.sortQuery=function(e){return this._sort="undefined"==typeof e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join("&");// Makes the call idempotent
if(e&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(0<=t){var o=this.url.substring(t+1).split("&");"function"==typeof this._sort?o.sort(this._sort):o.sort(),this.url=this.url.substring(0,t)+"?"+o.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(e,t,o){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=o,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;// deadline
this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};/**
	 * Return the mime type for the given `str`.
	 *
	 * @param {String} str
	 * @return {String}
	 * @api private
	 */var fr={type:function(e){return e.split(/ *; */).shift()},params:function(e){return e.split(/ *; */).reduce(function(e,t){var o=t.split(/ *= */),r=o.shift(),n=o.shift();return r&&n&&(e[r]=n),e},{})},parseLinks:function(e){return e.split(/ *, */).reduce(function(e,t){var o=t.split(/ *; */),r=o[0].slice(1,-1),n=o[1].split(/ *= */)[1].slice(1,-1);return e[n]=r,e},{})},cleanHeader:function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}};/**
	 * Return header field parameters.
	 *
	 * @param {String} str
	 * @return {Object}
	 * @api private
	 */s.prototype.get=function(e){return this.header[e.toLowerCase()]},s.prototype._setHeaderProperties=function(e){// TODO: moar!
// TODO: make this a util
// content-type
var t=e["content-type"]||"";this.type=fr.type(t);// params
var o=fr.params(t);for(var r in o)this[r]=o[r];this.links={};// links
try{e.link&&(this.links=fr.parseLinks(e.link))}catch(e){// ignore
}},s.prototype._setStatusProperties=function(e){var t=0|e/100;// status / class
// basics
// sugar
this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=!(4!=t&&5!=t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e},["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){/** Default setting for all requests from this agent */l.prototype[e]=function()/*varargs*/{return this._defaults.push({fn:e,arguments:arguments}),this}}),l.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})};var br,Cr=l,Or=o(function(e,t){/**
	 * Noop.
	 */function o(){}/**
	 * Expose `request`.
	 */ /**
	 * Serialize the given `obj`.
	 *
	 * @param {Object} obj
	 * @return {String}
	 * @api private
	 */function n(e){if(!yr(e))return e;var t=[];for(var o in e)a(t,o,e[o]);return t.join("&")}/**
	 * Helps 'serialize' with serializing arrays.
	 * Mutates the pairs array.
	 *
	 * @param {Array} pairs
	 * @param {String} key
	 * @param {Mixed} val
	 */function a(e,t,o){if(!(null!=o))null===o&&e.push(encodeURIComponent(t));else if(Array.isArray(o))o.forEach(function(o){a(e,t,o)});else if(yr(o))for(var r in o)a(e,t+"["+r+"]",o[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}/**
	 * Expose serialization method.
	 */ /**
	  * Parse the given x-www-form-urlencoded `str`.
	  *
	  * @param {String} str
	  * @return {Object}
	  * @api private
	  */function i(e){for(var t,o,r={},n=e.split("&"),s=0,a=n.length;s<a;++s)t=n[s],o=t.indexOf("="),-1==o?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,o))]=decodeURIComponent(t.slice(o+1));return r}/**
	 * Expose parser.
	 */ /**
	 * Parse the given header `str` into
	 * an object containing the mapped fields.
	 *
	 * @param {String} str
	 * @return {Object}
	 * @api private
	 */function d(e){for(var t,o,r,n,s=e.split(/\r?\n/),a={},d=0,l=s.length;d<l;++d)(o=s[d],t=o.indexOf(":"),-1!==t)&&(r=o.slice(0,t).toLowerCase(),n=y(o.slice(t+1)),a[r]=n);return a}/**
	 * Check if `mime` is json or has +json structured syntax suffix.
	 *
	 * @param {String} mime
	 * @return {Boolean}
	 * @api private
	 */function l(e){// should match /json or +json
// but not /json-seq
return /[\/+]json($|[^-\w])/.test(e)}/**
	 * Initialize a new `Response` with the given `xhr`.
	 *
	 *  - set flags (.ok, .error, etc)
	 *  - parse header
	 *
	 * Examples:
	 *
	 *  Aliasing `superagent` as `request` is nice:
	 *
	 *      request = superagent;
	 *
	 *  We can use the promise-like API, or pass callbacks:
	 *
	 *      request.get('/').end(function(res){});
	 *      request.get('/', function(res){});
	 *
	 *  Sending data can be chained:
	 *
	 *      request
	 *        .post('/user')
	 *        .send({ name: 'tj' })
	 *        .end(function(res){});
	 *
	 *  Or passed to `.send()`:
	 *
	 *      request
	 *        .post('/user')
	 *        .send({ name: 'tj' }, function(res){});
	 *
	 *  Or passed to `.post()`:
	 *
	 *      request
	 *        .post('/user', { name: 'tj' })
	 *        .end(function(res){});
	 *
	 * Or further reduced to a single call for simple cases:
	 *
	 *      request
	 *        .post('/user', { name: 'tj' }, function(res){});
	 *
	 * @param {XMLHTTPRequest} xhr
	 * @param {Object} options
	 * @api private
	 */function p(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;// handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request
// getAllResponseHeaders sometimes falsely returns "" for CORS requests, but
// getResponseHeader still works. so we get content-type even if getting
// other headers fails.
1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=d(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body=null===this.text&&e._responseType?this.xhr.response:"HEAD"==this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}/**
	 * Initialize a new `Request` with the given `method` and `url`.
	 *
	 * @param {String} method
	 * @param {String} url
	 * @api public
	 */function c(e,t){var o=this;// preserves header name case
// coerces header names to lowercase
this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var t=null,r=null;try{r=new p(o)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,o.xhr?(t.rawResponse="undefined"==typeof o.xhr.responseType?o.xhr.responseText:o.xhr.response,t.status=o.xhr.status?o.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),o.callback(t)}o.emit("response",r);var n;try{o._isResponseOK(r)||(n=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(e){n=e}// #1000 don't catch errors from the callback to avoid double calling it
n?(n.original=t,n.response=r,n.status=r.status,o.callback(n,r)):o.callback(null,r)})}/**
	 * Mixin `Emitter` and `RequestBase`.
	 */ /**
	 * DELETE `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed} [data]
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */function _(e,t,o){var r=m("DELETE",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r}/**
	 * Root reference for iframes.
	 */var u;"undefined"==typeof window?"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),u=oe):u=self:u=window;var m=t=e.exports=function(e,o){// callback
return"function"==typeof o?new t.Request("GET",e).end(o):1==arguments.length?new t.Request("GET",e):new t.Request(e,o);// url first
};t.Request=c,m.getXHR=function(){if(u.XMLHttpRequest&&(!u.location||"file:"!=u.location.protocol||!u.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};/**
	 * Removes leading and trailing whitespace, added to support IE.
	 *
	 * @param {String} s
	 * @return {String}
	 * @api private
	 */var y=function(e){return e.trim()};/**
	 * Default MIME type map.
	 *
	 *     superagent.types.xml = 'application/xml';
	 *
	 */ /**
	 * Default serialization map.
	 *
	 *     superagent.serialize['application/xml'] = function(obj){
	 *       return 'generated xml here';
	 *     };
	 *
	 */ /**
	  * Default parsers.
	  *
	  *     superagent.parse['application/xml'] = function(str){
	  *       return { object parsed from str };
	  *     };
	  *
	  */ /**
	 * Parse the given body `str`.
	 *
	 * Used for auto-parsing of bodies. Parsers
	 * are defined on the `superagent.parse` object.
	 *
	 * @param {String} str
	 * @return {Mixed}
	 * @api private
	 */ /**
	 * Return an `Error` representative of this response.
	 *
	 * @return {Error}
	 * @api public
	 */ /**
	 * Expose `Response`.
	 */ /**
	 * Set Content-Type to `type`, mapping values from `request.types`.
	 *
	 * Examples:
	 *
	 *      superagent.types.xml = 'application/xml';
	 *
	 *      request.post('/')
	 *        .type('xml')
	 *        .send(xmlstring)
	 *        .end(callback);
	 *
	 *      request.post('/')
	 *        .type('application/xml')
	 *        .send(xmlstring)
	 *        .end(callback);
	 *
	 * @param {String} type
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Set Accept to `type`, mapping values from `request.types`.
	 *
	 * Examples:
	 *
	 *      superagent.types.json = 'application/json';
	 *
	 *      request.get('/agent')
	 *        .accept('json')
	 *        .end(callback);
	 *
	 *      request.get('/agent')
	 *        .accept('application/json')
	 *        .end(callback);
	 *
	 * @param {String} accept
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Set Authorization field value with `user` and `pass`.
	 *
	 * @param {String} user
	 * @param {String} [pass] optional in case of using 'bearer' as type
	 * @param {Object} options with 'type' property 'auto', 'basic' or 'bearer' (default 'basic')
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Add query-string `val`.
	 *
	 * Examples:
	 *
	 *   request.get('/shoes')
	 *     .query('size=10')
	 *     .query({ color: 'blue' })
	 *
	 * @param {Object|String} val
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Queue the given `file` as an attachment to the specified `field`,
	 * with optional `options` (or filename).
	 *
	 * ``` js
	 * request.post('/upload')
	 *   .attach('content', new Blob(['<a id="a"><b id="b">hey!</b></a>'], { type: "text/html"}))
	 *   .end(callback);
	 * ```
	 *
	 * @param {String} field
	 * @param {Blob|File} file
	 * @param {String|Object} options
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Invoke the callback with `err` and `res`
	 * and handle arity check.
	 *
	 * @param {Error} err
	 * @param {Response} res
	 * @api private
	 */ /**
	 * Invoke callback with x-domain error.
	 *
	 * @api private
	 */ // This only warns, because the request is still likely to work
// This throws, because it can't send/receive data as expected
/**
	 * Check if `obj` is a host object,
	 * we don't want to serialize these :)
	 *
	 * @param {Object} obj
	 * @return {Boolean}
	 * @api private
	 */ /**
	 * Initiate request, invoking callback `fn(res)`
	 * with an instanceof `Response`.
	 *
	 * @param {Function} fn
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * GET `url` with optional callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * HEAD `url` with optional callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * OPTIONS query to `url` with optional callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * PATCH `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed} [data]
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * POST `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed} [data]
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * PUT `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */m.serializeObject=n,m.parseString=i,m.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},m.serialize={"application/x-www-form-urlencoded":n,"application/json":JSON.stringify},m.parse={"application/x-www-form-urlencoded":i,"application/json":JSON.parse},s(p.prototype),p.prototype._parseBody=function(e){var t=m.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&l(this.type)&&(t=m.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},p.prototype.toError=function(){var e=this.req,t=e.method,o=e.url,r="cannot "+t+" "+o+" ("+this.status+")",n=new Error(r);return n.status=this.status,n.method=t,n.url=o,n},m.Response=p,mr(c.prototype),r(c.prototype),c.prototype.type=function(e){return this.set("Content-Type",m.types[e]||e),this},c.prototype.accept=function(e){return this.set("Accept",m.types[e]||e),this},c.prototype.auth=function(e,t,o){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(o=t,t=""),o||(o={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,o,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},c.prototype.query=function(e){return"string"!=typeof e&&(e=n(e)),e&&this._query.push(e),this},c.prototype.attach=function(e,t,o){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,o||t.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new u.FormData),this._formData},c.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var o=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),o(e,t)},c.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._isHost=function(e){// Native objects stringify to [object File], [object Blob], [object FormData], etc.
return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},c.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||o,this._finalizeQueryString(),this._end()},c.prototype._end=function(){var t=this,o=this.xhr=m.getXHR(),r=this._formData||this._data;this._setTimeouts(),o.onreadystatechange=function(){var e=o.readyState;if(2<=e&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==e){// In IE9, reads to any property (e.g. status) off of an aborted XHR will
// result in the error "Could not complete the operation due to error c00c023f"
var r;try{r=o.status}catch(t){r=0}return r?void t.emit("end"):t.timedout||t._aborted?void 0:t.crossDomainError()}};// progress
var n=function(o,r){0<r.total&&(r.percent=100*(r.loaded/r.total)),r.direction=o,t.emit("progress",r)};if(this.hasListeners("progress"))try{o.onprogress=n.bind(null,"download"),o.upload&&(o.upload.onprogress=n.bind(null,"upload"))}catch(t){// Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.
// Reported here:
// https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context
}// initiate request
try{this.username&&this.password?o.open(this.method,this.url,!0,this.username,this.password):o.open(this.method,this.url,!0)}catch(e){// see #1149
return this.callback(e)}// CORS
// body
if(this._withCredentials&&(o.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){// serialize stuff
var s=this._header["content-type"],a=this._serializer||m.serialize[s?s.split(";")[0]:""];!a&&l(s)&&(a=m.serialize["application/json"]),a&&(r=a(r))}// set header fields
for(var i in this.header)null!=this.header[i]&&this.header.hasOwnProperty(i)&&o.setRequestHeader(i,this.header[i]);return this._responseType&&(o.responseType=this._responseType),this.emit("request",this),o.send("undefined"==typeof r?null:r),this},m.agent=function(){return new Cr},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){Cr.prototype[e.toLowerCase()]=function(t,o){var r=new m.Request(e,t);return this._setDefaults(r),o&&r.end(o),r}}),Cr.prototype.del=Cr.prototype["delete"],m.get=function(e,t,o){var r=m("GET",e);return"function"==typeof t&&(o=t,t=null),t&&r.query(t),o&&r.end(o),r},m.head=function(e,t,o){var r=m("HEAD",e);return"function"==typeof t&&(o=t,t=null),t&&r.query(t),o&&r.end(o),r},m.options=function(e,t,o){var r=m("OPTIONS",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},m.del=_,m["delete"]=_,m.patch=function(e,t,o){var r=m("PATCH",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},m.post=function(e,t,o){var r=m("POST",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},m.put=function(e,t,o){var r=m("PUT",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r}}),hr=Or.Request,Er=o(function(e){/**
	 * Constructor to create a storage for our `EE` objects.
	 * An `Events` instance is a plain object whose properties are event names.
	 *
	 * @constructor
	 * @private
	 */function t(){}//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
/**
	 * Representation of a single event listener.
	 *
	 * @param {Function} fn The listener function.
	 * @param {*} context The context to invoke the listener with.
	 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
	 * @constructor
	 * @private
	 */function o(e,t,o){this.fn=e,this.context=t,this.once=o||!1}/**
	 * Add a listener for a given event.
	 *
	 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn The listener function.
	 * @param {*} context The context to invoke the listener with.
	 * @param {Boolean} once Specify if the listener is a one-time listener.
	 * @returns {EventEmitter}
	 * @private
	 */function r(e,t,r,n,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,s),i=d?d+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],a]:e._events[i].push(a):(e._events[i]=a,e._eventsCount++),e}/**
	 * Clear event by name.
	 *
	 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
	 * @param {(String|Symbol)} evt The Event name.
	 * @private
	 */function n(e,o){0==--e._eventsCount?e._events=new t:delete e._events[o]}/**
	 * Minimal `EventEmitter` interface that is molded against the Node.js
	 * `EventEmitter` interface.
	 *
	 * @constructor
	 * @public
	 */function s(){this._events=new t,this._eventsCount=0}/**
	 * Return an array listing the events for which the emitter has registered
	 * listeners.
	 *
	 * @returns {Array}
	 * @public
	 */var a=Object.prototype.hasOwnProperty,d="~";/**
	 * Return the listeners registered for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @returns {Array} The registered listeners.
	 * @public
	 */ /**
	 * Return the number of listeners listening to a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @returns {Number} The number of listeners.
	 * @public
	 */ /**
	 * Calls each of the listeners registered for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @returns {Boolean} `true` if the event had listeners, else `false`.
	 * @public
	 */ /**
	 * Add a listener for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn The listener function.
	 * @param {*} [context=this] The context to invoke the listener with.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ /**
	 * Add a one-time listener for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn The listener function.
	 * @param {*} [context=this] The context to invoke the listener with.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ /**
	 * Remove the listeners of a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn Only remove the listeners that match this function.
	 * @param {*} context Only remove the listeners that have this context.
	 * @param {Boolean} once Only remove one-time listeners.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ /**
	 * Remove all listeners, or those of the specified event.
	 *
	 * @param {(String|Symbol)} [event] The event name.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ //
// Alias methods names because people roll like that.
//
//
// Expose the prefix.
//
//
// Allow `EventEmitter` to be imported as module namespace.
//
Object.create&&(t.prototype=Object.create(null),!new t().__proto__&&(d=!1)),s.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)a.call(e,t)&&o.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=d?d+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,n=o.length,s=Array(n);r<n;r++)s[r]=o[r].fn;return s},s.prototype.listenerCount=function(e){var t=d?d+e:e,o=this._events[t];return o?o.fn?1:o.length:0},s.prototype.emit=function(e,t,o,r,n,s){var a=d?d+e:e;if(!this._events[a])return!1;var l,p,c=this._events[a],_=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),_){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,o),!0;case 4:return c.fn.call(c.context,t,o,r),!0;case 5:return c.fn.call(c.context,t,o,r,n),!0;case 6:return c.fn.call(c.context,t,o,r,n,s),!0;}for(p=1,l=Array(_-1);p<_;p++)l[p-1]=arguments[p];c.fn.apply(c.context,l)}else{var u,m=c.length;for(p=0;p<m;p++)switch(c[p].once&&this.removeListener(e,c[p].fn,void 0,!0),_){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,t);break;case 3:c[p].fn.call(c[p].context,t,o);break;case 4:c[p].fn.call(c[p].context,t,o,r);break;default:if(!l)for(u=1,l=Array(_-1);u<_;u++)l[u-1]=arguments[u];c[p].fn.apply(c[p].context,l);}}return!0},s.prototype.on=function(e,t,o){return r(this,e,t,o,!1)},s.prototype.once=function(e,t,o){return r(this,e,t,o,!0)},s.prototype.removeListener=function(e,t,o,r){var s=d?d+e:e;if(!this._events[s])return this;if(!t)return n(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||r&&!a.once||o&&a.context!==o||n(this,s);else{for(var l=0,p=[],c=a.length;l<c;l++)(a[l].fn!==t||r&&!a[l].once||o&&a[l].context!==o)&&p.push(a[l]);//
// Reset the array, or remove it completely if we have no more listeners.
//
p.length?this._events[s]=1===p.length?p[0]:p:n(this,s)}return this},s.prototype.removeAllListeners=function(e){var o;return e?(o=d?d+e:e,this._events[o]&&n(this,o)):(this._events=new t,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=d,s.EventEmitter=s,e.exports=s}),Sr={/** 华北节点 */NorthChina:0,/** 华东节点 */EastChina:1,/** 美国节点 */NorthAmerica:2},Tr={/**
	               * 连接成功
	               * @event Play#CONNECTED
	               */CONNECTED:"connected",/**
	                           * 连接失败
	                           *
	                           * @event Play#CONNECT_FAILED
	                           * @param {Object} payload
	                           * @param {Number} payload.code
	                           * @param {String} payload.detail
	                           */CONNECT_FAILED:"connectFailed",/**
	                                    * 断开连接
	                                    * @event Play#DISCONNECTED
	                                    */DISCONNECTED:"disconnected",/**
	                                 * 加入到大厅
	                                 * @event Play#LOBBY_JOINED
	                                 */LOBBY_JOINED:"lobbyJoined",/**
	                                * 离开大厅
	                                * @event Play#LOBBY_LEFT
	                                */LOBBY_LEFT:"lobbyLeft",/**
	                            * 大厅房间列表变化
	                            * @event Play#LOBBY_ROOM_LIST_UPDATED
	                            */LOBBY_ROOM_LIST_UPDATED:"lobbyRoomListUpdate",/**
	                                                   * 创建房间成功
	                                                   * @event Play#ROOM_CREATED
	                                                   */ROOM_CREATED:"roomCreated",/**
	                                * 创建房间失败
	                                * @event Play#ROOM_CREATE_FAILED
	                                * @param {Object} payload
	                                * @param {Number} payload.code
	                                * @param {String} payload.detail
	                                */ROOM_CREATE_FAILED:"roomCreateFailed",/**
	                                           * 加入房间成功
	                                           * @event Play#ROOM_JOINED
	                                           */ROOM_JOINED:"roomJoined",/**
	                              * 加入房间失败
	                              * @event Play#ROOM_JOIN_FAILED
	                              */ROOM_JOIN_FAILED:"roomJoinFailed",/**
	                                       * 有新玩家加入房间
	                                       * @event Play#PLAYER_ROOM_JOINED
	                                       * @param {Object} payload
	                                       * @param {Player} payload.newPlayer
	                                       */PLAYER_ROOM_JOINED:"newPlayerJoinedRoom",/**
	                                              * 有玩家离开房间
	                                              * @event Play#PLAYER_ROOM_LEFT
	                                              * @param {Object} payload
	                                              * @param {Player} payload.leftPlayer
	                                              */PLAYER_ROOM_LEFT:"playerLeftRoom",/**
	                                       * 玩家活跃属性变化
	                                       * @event Play#PLAYER_ACTIVITY_CHANGED
	                                       * @param {Object} payload
	                                       * @param {Player} payload.player
	                                       */PLAYER_ACTIVITY_CHANGED:"playerActivityChanged",/**
	                                                     * 主机变更
	                                                     * @event Play#MASTER_SWITCHED
	                                                     * @param {Object} payload
	                                                     * @param {Player} payload.newMaster
	                                                     */MASTER_SWITCHED:"masterSwitched",/**
	                                      * 房间「开启 / 关闭」
	                                      * @event Play#ROOM_OPEN_CHANGED
	                                      * @param {Object} payload
	                                      * @param {Boolean} payload.opened
	                                      */ROOM_OPEN_CHANGED:"roomOpenChanged",/**
	                                         * 房间「可见 / 不可见」
	                                         * @event Play#ROOM_VISIBLE_CHANGED
	                                         * @param {Object} payload
	                                         * @param {Boolean} payload.visible
	                                         */ROOM_VISIBLE_CHANGED:"roomVisibleChanged",/**
	                                               * 离开房间
	                                               * @event Play#ROOM_LEFT
	                                               */ROOM_LEFT:"roomLeft",/**
	                          * 房间自定义属性变化
	                          * @event Play#ROOM_CUSTOM_PROPERTIES_CHANGED
	                          * @param {Object} payload
	                          * @param {Object} payload.changedProps
	                          */ROOM_CUSTOM_PROPERTIES_CHANGED:"roomCustomPropertiesChanged",/**
	                                                                  * 玩家自定义属性变化
	                                                                  * @event Play#PLAYER_CUSTOM_PROPERTIES_CHANGED
	                                                                  * @param {Object} payload
	                                                                  * @param {Player} payload.player
	                                                                  * @param {Object} payload.changedProps
	                                                                  */PLAYER_CUSTOM_PROPERTIES_CHANGED:"playerCustomPropertiesChanged",/**
	                                                                      * 自定义事件
	                                                                      * @event Play#CUSTOM_EVENT
	                                                                      * @param {Object} payload
	                                                                      * @param {Number|String} payload.eventId
	                                                                      * @param {Object} payload.eventData
	                                                                      * @param {Number} payload.senderId
	                                                                      */CUSTOM_EVENT:"customEvent",/**
	                                * 错误事件
	                                * @event Play#ERROR
	                                * @param {Object} payload
	                                * @param {Number} payload.code
	                                * @param {String} payload.detail
	                                */ERROR:"error"},kr=function(){function e(t){Xo(this,e),this._play=t,this._userId="",this._actorId=-1}return or(e,[{key:"_initWithJSONObject",value:function(e){this._userId=e.pid,this._actorId=e.actorId,this.properties=e.attr?e.attr:{}}/**
	       * 玩家 ID
	       * @type {string}
	       * @readonly
	       */},{key:"isLocal",/**
	                                * 判断是不是当前客户端玩家
	                                * @return {Boolean}
	                                */value:function(){return-1!==this._actorId&&this._play._player._actorId===this._actorId}/**
	       * 判断是不是主机玩家
	       * @return {Boolean}
	       */},{key:"isMaster",value:function(){return-1!==this._actorId&&this._play._room.masterId===this._actorId}/**
	       * 判断是不是活跃状态
	       * @return {Boolean}
	       */},{key:"isActive",value:function(){return this.active}/**
	       * 设置玩家的自定义属性
	       * @param {Object} properties 自定义属性
	       * @param {Object} [opts] 设置选项
	       * @param {Object} [opts.expectedValues] 期望属性，用于 CAS 检测
	       */},{key:"setCustomProperties",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.expectedValues,r=void 0===o?null:o;this._play._setPlayerCustomProperties(this._actorId,e,r)}/**
	       * @deprecated
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"getCustomProperties",value:function(){return this.properties}/**
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"_setActive",// 设置活跃状态
value:function(e){this.active=e}},{key:"_mergeProperties",value:function(e){this.properties=Uo(this.properties,e)}},{key:"userId",get:function(){return this._userId}/**
	                                                                      * 房间玩家 ID
	                                                                      * @type {number}
	                                                                      * @readonly
	                                                                      */},{key:"actorId",get:function(){return this._actorId}},{key:"CustomProperties",get:function(){return this.properties}}],[{key:"_newFromJSONObject",value:function(t,o){var r=new e(t);return r._initWithJSONObject(o),r}}]),e}(),vr=function(){function e(t){Xo(this,e),this._roomName=t.cid,this._maxPlayerCount=t.maxMembers,this._expectedUserIds=t.expectMembers,this._emptyRoomTtl=t.emptyRoomTtl,this._playerTtl=t.playerTtl,this._playerCount=t.playerCount,t.attr&&(this._customRoomProperties=t.attr)}/**
	     * 房间名称
	     * @type {string}
	     * @readonly
	     */return or(e,[{key:"roomName",get:function(){return this._roomName}/**
	       * 房间最大玩家数
	       * @type {number}
	       * @readonly
	       */},{key:"maxPlayerCount",get:function(){return this._maxPlayerCount}/**
	       * 邀请好友 ID 数组
	       * @type {Array.<string>}
	       * @readonly
	       */},{key:"expectedUserIds",get:function(){return this._expectedUserIds}/**
	       * 房间置空后销毁时间（秒）
	       * @type {number}
	       * @readonly
	       */},{key:"emptyRoomTtl",get:function(){return this._emptyRoomTtl}/**
	       * 玩家离线后踢出房间时间（秒）
	       * @type {number}
	       * @readonly
	       */},{key:"playerTtl",get:function(){return this._playerTtl}/**
	       * 当前房间玩家数量
	       * @type {number}
	       * @readonly
	       */},{key:"playerCount",get:function(){return this._playerCount}/**
	       * 房间属性
	       * @type {Object}
	       * @readonly
	       */},{key:"customRoomProperties",get:function(){return this._customRoomProperties}}]),e}(),Pr=o(function(e,t){t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(er);t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}),Rr=t(Pr),Ir=24*(60*(60*1e3)),d=function(e,t){t=t||{};var o=typeof e;if("string"==o&&0<e.length)return p(e);if("number"==o&&!1===isNaN(e))return t.long?_(e):c(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},Mr=function(e){/**
	  * Selects a color for a debug namespace
	  * @param {String} namespace The namespace string for the for the debug instance to be colored
	  * @return {Number|String} An ANSI color code for the given namespace
	  * @api private
	  */function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return o.colors[te(t)%o.colors.length]}/**
	  * Create a debugger with the given `namespace`.
	  *
	  * @param {String} namespace
	  * @return {Function}
	  * @api public
	  */function o(e){function s(){// Disabled?
if(s.enabled){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=s,i=+new Date,d=i-(a||i);// Set `diff` timestamp
n.diff=d,n.prev=a,n.curr=i,a=i,t[0]=o.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");// Apply any `formatters` transformations
var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){// If we encounter an escaped % then don't increase the array index
if("%%"===e)return e;l++;var s=o.formatters[r];if("function"==typeof s){var a=t[l];e=s.call(n,a),t.splice(l,1),l--}return e}),o.formatArgs.call(n,t);var p=n.log||o.log;p.apply(n,t)}}var a;return s.namespace=e,s.enabled=o.enabled(e),s.useColors=o.useColors(),s.color=t(e),s.destroy=r,s.extend=n,"function"==typeof o.init&&o.init(s),o.instances.push(s),s}function r(){var e=o.instances.indexOf(this);return-1!==e&&(o.instances.splice(e,1),!0)}function n(e,t){return o(this.namespace+("undefined"==typeof t?":":t)+e)}/**
	  * Enables a debug mode by namespaces. This can include modes
	  * separated by a colon and wildcards.
	  *
	  * @param {String} namespaces
	  * @api public
	  */function s(e){o.save(e),o.names=[],o.skips=[];var t,r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&(e=r[t].replace(/\*/g,".*?"),"-"===e[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")));for(t=0;t<o.instances.length;t++){var s=o.instances[t];s.enabled=o.enabled(s.namespace)}}/**
	  * Disable debug output.
	  *
	  * @api public
	  */ /**
	  * Returns true if the given mode name is enabled, false otherwise.
	  *
	  * @param {String} name
	  * @return {Boolean}
	  * @api public
	  */function a(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=o.skips.length;t<r;t++)if(o.skips[t].test(e))return!1;for(t=0,r=o.names.length;t<r;t++)if(o.names[t].test(e))return!0;return!1}/**
	  * Coerce `val`.
	  *
	  * @param {Mixed} val
	  * @return {Mixed}
	  * @api private
	  */return o.debug=o,o.default=o,o.coerce=function(e){return e instanceof Error?e.stack||e.message:e},o.disable=function(){o.enable("")},o.enable=s,o.enabled=a,o.humanize=d,Object.keys(e).forEach(function(t){o[t]=e[t]}),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=t,o.enable(o.load()),o},Lr=o(function(e,t){function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}/* eslint-env browser */ /**
	 * This is the web browser implementation of `debug()`.
	 */ /**
	 * Invokes `console.log()` when available.
	 * No-op when `console.log` is not a "function".
	 *
	 * @api public
	 */function r(){var e;// This hackery is required for IE8/9, where
// the `console.log` function doesn't have 'apply'
return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)}/**
	 * Save `namespaces`.
	 *
	 * @param {String} namespaces
	 * @api private
	 */ /**
	 * Load `namespaces`.
	 *
	 * @return {String} returns the previously persisted debug modes
	 * @api private
	 */function n(){var e;try{e=t.storage.getItem("debug")}catch(e){}// Swallow
// XXX (@Qix-) should we be logging these?
// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}/**
	 * Localstorage attempts to return the localstorage.
	 *
	 * This is necessary because safari throws
	 * when a user disables cookies/localstorage
	 * and you attempt to access it.
	 *
	 * @return {LocalStorage}
	 * @api private
	 */t.log=r,t.formatArgs=/**
	 * Colorize log arguments if enabled.
	 *
	 * @api public
	 */function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!!this.useColors){var o="color: "+this.color;t.splice(1,0,o,"color: inherit");// The final "%c" is somewhat tricky, because there could be other
// arguments passed either before or after the %c, so we need to
// figure out the correct index to insert the CSS into
var r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"===e||(r++,"%c"===e&&(n=r))}),t.splice(n,0,o)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){// Swallow
// XXX (@Qix-) should we be logging these?
}},t.load=n,t.useColors=/**
	 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
	 * and the Firebug extension (any Firefox version) are known
	 * to support "%c" CSS customizations.
	 *
	 * TODO: add a `localStorage` variable to explicitly enable/disable colors
	 */ // eslint-disable-next-line complexity
function(){// NB: In an Electron preload script, document will be defined but not fully
// initialized. Since we know we're in Chrome, we'll just detect this case
// explicitly
return!!("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||// Is firebug? http://stackoverflow.com/a/398120/376773
"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||// Is firefox >= v31?
// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||// Double check webkit in userAgent just in case we are in a worker
"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));// Internet Explorer and Edge do not support colors.
// Is webkit? http://stackoverflow.com/a/16459606/376773
// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
},t.storage=function(){try{// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
// The Browser also has localStorage in the global context.
return localStorage}catch(e){// Swallow
// XXX (@Qix-) should we be logging these?
}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=Mr(t);var s=e.exports.formatters;/**
	 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
	 */s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),xr=Lr.log,Nr=Lr.formatArgs,Ar=Lr.save,Fr=Lr.load,Dr=Lr.useColors,wr=Lr.storage,jr=Lr.colors,Gr=Lr("Play"),Br={Debug:"Debug",Warn:"Warn",Error:"Error"},Yr=(br={},Rr(br,Br.Debug,Gr),Rr(br,Br.Warn,console.warn.bind(console)),Rr(br,Br.Error,console.error.bind(console)),br),Hr={/**
	                   * 关闭
	                   */CLOSED:"CLOSED",/**
	                     * 连接中
	                     */CONNECTING:"CONNECTING",/**
	                             * 大厅连接成功
	                             */LOBBY_OPEN:"LOBBY_OPEN",/**
	                             * 房间连接成功
	                             */GAME_OPEN:"GAME_OPEN",/**
	                           * 关闭中
	                           */CLOSING:"CLOSING"},Wr=Vt.f,qr=function(e){return function(t){for(var o,r=je(t),n=Qe(r),s=n.length,a=0,d=[];s>a;)Wr.call(r,o=n[a++])&&d.push(e?[o,r[o]]:r[o]);return d}}(!1);Ne(Ne.S,"Object",{values:function(e){return qr(e)}});var Vr=re.Object.values,Ur=o(function(e){e.exports={default:Vr,__esModule:!0}}),Jr=t(Ur),zr=function(){function e(t){Xo(this,e),this._play=t}/* eslint no-param-reassign: ["error", { "props": false }] */return or(e,[{key:"getPlayer",/**
	                                                                                                        * 根据 actorId 获取 Player 对象
	                                                                                                        * @param {number} actorId 玩家在房间中的 Id
	                                                                                                        * @return {Player}
	                                                                                                        */value:function(e){if("number"!=typeof e)throw new TypeError(e+" is not a number");if(-1===e)return null;var t=this._players[e];if(null===t)throw new Error("player with id:"+e+" not found");return t}/**
	       * 获取房间内的玩家列表
	       * @return {Array.<Player>}
	       * @readonly
	       */},{key:"setCustomProperties",/**
	                                            * 设置房间的自定义属性
	                                            * @param {Object} properties 自定义属性
	                                            * @param {Object} [opts] 设置选项
	                                            * @param {Object} [opts.expectedValues] 期望属性，用于 CAS 检测
	                                            */value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.expectedValues,r=void 0===o?null:o;this._play._setRoomCustomProperties(e,r)}/**
	       * @deprecated
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"getCustomProperties",value:function(){return this._properties}/**
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"_addPlayer",value:function(e){if(!(e instanceof kr))throw new TypeError(e+" is not a Player");this._players[e.actorId]=e}},{key:"_removePlayer",value:function(e){delete this._players[e]}},{key:"_mergeProperties",value:function(e){this._properties=Uo(this._properties,e)}},{key:"name",/**
	                         * 房间名称
	                         * @type {string}
	                         * @readonly
	                         */get:function(){return this._name}/**
	                                                                     * 房间是否开启
	                                                                     * @type {boolean}
	                                                                     * @readonly
	                                                                     */},{key:"opened",get:function(){return this._opened}/**
	                                                                                                                                        * 房间是否可见
	                                                                                                                                        * @type {boolean}
	                                                                                                                                        * @readonly
	                                                                                                                                        */},{key:"visible",get:function(){return this._visible}/**
	                                                                                                                                                                                                             * 房间允许的最大玩家数量
	                                                                                                                                                                                                             * @type {number}
	                                                                                                                                                                                                             * @readonly
	                                                                                                                                                                                                             */},{key:"maxPlayerCount",get:function(){return this._maxPlayerCount}/**
	                                                                                                                                                                                                                                                                                                * 获取房主
	                                                                                                                                                                                                                                                                                                * @readonly
	                                                                                                                                                                                                                                                                                                */},{key:"master",get:function(){return this.getPlayer(this.masterId)}/**
	                                                                                                                                                                                                                                                                                                                                                                                    * 房间主机玩家 ID
	                                                                                                                                                                                                                                                                                                                                                                                    * @type {number}
	                                                                                                                                                                                                                                                                                                                                                                                    * @readonly
	                                                                                                                                                                                                                                                                                                                                                                                    */},{key:"masterId",get:function(){return this._masterActorId}/**
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 邀请的好友 ID 列表
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @type {Array.<string>}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @readonly
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                */},{key:"expectedUserIds",get:function(){return this._expectedUserIds}},{key:"playerList",get:function(){return Jr(this._players)}},{key:"CustomProperties",get:function(){return this._properties}}],[{key:"_newFromJSONObject",value:function(t,o){var r=new e(t);r._name=o.cid,r._opened=o.open,r._visible=o.visible,r._maxPlayerCount=o.maxMembers,r._masterActorId=o.masterActorId,r._expectedUserIds=o.expectMembers,r._players={};for(var n=0;n<o.members.length;n+=1){var s=o.members[n],a=kr._newFromJSONObject(t,s);a.userId===t.userId&&(t._player=a),r._players[a.actorId]=a}return r._properties=o.attr?o.attr:{},r}}]),e}(),$r="0.15.0",Kr="https://game-router-cn-e1.leancloud.cn/v1/router",Xr=null;"undefined"==typeof WebSocket?"undefined"==typeof MozWebSocket?"undefined"==typeof oe?"undefined"==typeof window?"undefined"!=typeof self&&(Xr=self.WebSocket||self.MozWebSocket):Xr=window.WebSocket||window.MozWebSocket:Xr=oe.WebSocket||oe.MozWebSocket:Xr=MozWebSocket:Xr=WebSocket;var Qr=Xr,Zr={WebSocket:Qr},en=// eslint-disable-next-line no-undef
"object"===("undefined"==typeof wx?"undefined":Yo(wx))&&"function"==typeof wx.connectSocket,tn=12e4,on=1e4,rn=function(e){/**
	                                                                  * 初始化客户端
	                                                                  * @param {Object} opts
	                                                                  * @param {String} opts.userId 玩家唯一 Id
	                                                                  * @param {String} opts.appId APP ID
	                                                                  * @param {String} opts.appKey APP KEY
	                                                                  * @param {Number} opts.region 节点地区
	                                                                  * @param {Boolean} [opts.ssl] 是否使用 ssl，仅在 Client Engine 中可用
	                                                                  * @param {String} [opts.gameVersion] 游戏版本号
	                                                                  */function t(e){Xo(this,t);var o=nr(this,(t.__proto__||$o(t)).call(this));if("string"!=typeof e.appId)throw new TypeError(e.appId+" is not a string");if("string"!=typeof e.appKey)throw new TypeError(e.appKey+" is not a string");if("number"!=typeof e.region)throw new TypeError(e.region+" is not a number");if("string"!=typeof e.userId)throw new TypeError(e.userId+" is not a string");if(void 0!==e.feature&&"string"!=typeof e.feature)throw new TypeError(e.feature+" is not a string");if(void 0!==e.ssl&&"boolean"!=typeof e.ssl)throw new TypeError(e.ssl+" is not a boolean");if(void 0!==e.gameVersion&&"string"!=typeof e.gameVersion)throw new TypeError(e.gameVersion+" is not a string");/**
	       * 玩家 ID
	       * @type {string}
	       */return o.userId=e.userId,o._appId=e.appId,o._appKey=e.appKey,o._region=e.region,o._feature=e.feature,!1===e.ssl&&(o._insecure=!0),o.gameVersion=e.gameVersion?e.gameVersion:"0.0.1",o.reset(),o}/**
	     * 建立连接
	     */return ur(t,e),or(t,[{key:"connect",value:function(){var e=this;// 判断是否有 userId
if(null===this.userId)throw new Error("userId is null");if(this._playState===Hr.CONNECTING||this._playState===Hr.LOBBY_OPEN||this._playState===Hr.GAME_OPEN)return void y("Current play state: "+this._playState+", ignore");// 判断是否已经在等待连接
if(this._connectTimer)return void y("waiting for connect");// 判断连接时间
var t=new Date().getTime();if(t<this._nextConnectTimestamp){var o=this._nextConnectTimestamp-t;m("wait time: "+o),this._connectTimer=setTimeout(function(){m("connect time out"),e._connect(),clearTimeout(e._connectTimer),e._connectTimer=null},o)}else this._connect()}},{key:"_connect",value:function(){var e=this;if(this.gameVersion&&"string"!=typeof this.gameVersion)throw new TypeError(this.gameVersion+" is not a string");var t=Kr;this._region===Sr.NorthChina?t="https://game-router-cn-n1.leancloud.cn/v1/router":this._region===Sr.EastChina?t=Kr:this._region===Sr.NorthAmerica&&(t="https://game-router-us-w1.leancloud.cn/v1/router"),this._playState=Hr.CONNECTING;var o={appId:this._appId,sdkVersion:$r};// 使用设置覆盖 SDK 判断的 feature
this._feature?o.feature=this._feature:en&&(o.feature="wechat"),this._insecure&&(o.insecure=this._insecure),this._httpReq=Or.get(t).query(o).end(function(t,o){var r=Math.pow;if(t)g(t),e._connectFailedCount+=1,e._nextConnectTimestamp=Date.now()+1e3*r(2,e._connectFailedCount),e.emit(Tr.CONNECT_FAILED,{code:-1,detail:"Game router connect failed"});else{var n=JSON.parse(o.text);m(o.text),e._connectFailedCount=0,e._nextConnectTimestamp=0,clearTimeout(e._connectTimer),e._connectTimer=null,e._primaryServer=n.server,e._secondaryServer=n.secondary,e._masterServer=e._primaryServer,e._serverValidTimeStamp=Date.now()+1e3*n.ttl,e._connectToMaster()}})}/**
	       * 重新连接
	       */},{key:"reconnect",value:function(){var e=Date.now();e>this._serverValidTimeStamp?this.connect(this.gameVersion):this._connectToMaster()}/**
	       * 重新连接并自动加入房间
	       */},{key:"reconnectAndRejoin",value:function(){if(null===this._cachedRoomMsg)throw new Error("no cache room info");if(void 0===this._cachedRoomMsg.cid)throw new Error("not cache room name");this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:this._cachedRoomMsg.cid,rejoin:!0},this._connectToGame()}/**
	       * 断开连接
	       */},{key:"disconnect",value:function(){var e=this;if(this._playState!==Hr.LOBBY_OPEN&&this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);this._playState=Hr.CLOSING,this._stopPing(),this._stopPong(),this._closeLobbySocket(function(){m("on close lobby socket"),e._closeGameSocket(function(){m("on close game socket"),e._playState=Hr.CLOSED,e.emit(Tr.DISCONNECTED),m(e.userId+" disconnect.")})})}/**
	       * 重置
	       */},{key:"reset",value:function(){this._room=null,this._player=null,this._cachedRoomMsg=null,this._playState=Hr.CLOSED,this._masterServer=null,this._gameServer=null,this._msgId=0,this._inLobby=!1,this._lobbyRoomList=null,this._connectFailedCount=0,this._nextConnectTimestamp=0,this._gameToLobby=!1,this._stopConnectTimer(),this._cancelHttp(),this._stopPing(),this._stopPong(),this._closeLobbySocket(),this._closeGameSocket()}/**
	       * 加入大厅
	       */},{key:"joinLobby",value:function(){if(this._playState!==Hr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);var e={cmd:"lobby",op:"add",i:this._getMsgId()};this._sendLobbyMessage(e)}/**
	       * 离开大厅
	       */},{key:"leaveLobby",value:function(){if(this._playState!==Hr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);var e={cmd:"lobby",op:"remove",i:this._getMsgId()};this._sendLobbyMessage(e)}/**
	       * 创建房间
	       * @param {Object} [opts] 创建房间选项
	       * @param {string} [opts.roomName] 房间名称，在整个游戏中唯一，默认值为 null，则由服务端分配一个唯一 Id
	       * @param {Object} [opts.roomOptions] 创建房间选项，默认值为 null
	       * @param {Boolean} [opts.roomOptions.opened] 房间是否打开
	       * @param {Boolean} [opts.roomOptions.visible] 房间是否可见，只有「可见」的房间会出现在房间列表里
	       * @param {Number} [opts.roomOptions.emptyRoomTtl] 房间为空后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.playerTtl] 玩家掉线后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.maxPlayerCount] 最大玩家数量
	       * @param {Object} [opts.roomOptions.customRoomProperties] 自定义房间属性
	       * @param {Array.<string>} [opts.roomOptions.customRoomPropertyKeysForLobby] 在大厅中可获得的房间属性「键」数组
	       * @param {CreateRoomFlag} [opts.roomOptions.flag] 创建房间标记，可多选
	       * @param {Array.<string>} [opts.expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"createRoom",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.roomName,o=void 0===t?null:t,r=e.roomOptions,n=void 0===r?null:r,s=e.expectedUserIds,a=void 0===s?null:s;if(null!==o&&"string"!=typeof o)throw new TypeError(o+" is not a string");if(null!==n&&!(n instanceof Object))throw new TypeError(n+" is not a Object");if(null!==a&&!Array.isArray(a))throw new TypeError(a+" is not an Array with string");if(this._playState!==Hr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);// 缓存 GameServer 创建房间的消息体
// 拷贝房间属性（包括 系统属性和玩家定义属性）
if(this._cachedRoomMsg={cmd:"conv",op:"start",i:this._getMsgId()},o&&(this._cachedRoomMsg.cid=o),n){var i=X(n);this._cachedRoomMsg=Uo(this._cachedRoomMsg,i)}a&&(this._cachedRoomMsg.expectMembers=a);// Router 创建房间的消息体
var d=this._cachedRoomMsg;this._sendLobbyMessage(d)}/**
	       * 加入房间
	       * @param {string} roomName 房间名称
	       * @param {*} [expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"joinRoom",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.expectedUserIds,r=void 0===o?null:o;if("string"!=typeof e)throw new TypeError(e+" is not a string");if(null!==r&&!Array.isArray(r))throw new TypeError(r+" is not an array with string");if(this._playState!==Hr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);// 加入房间的消息体
this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:e},r&&(this._cachedRoomMsg.expectMembers=r);var n=this._cachedRoomMsg;this._sendLobbyMessage(n)}/**
	       * 重新加入房间
	       * @param {string} roomName 房间名称
	       */},{key:"rejoinRoom",value:function(e){if("string"!=typeof e)throw new TypeError(e+" is not a string");if(this._playState!==Hr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:e,rejoin:!0};var t=this._cachedRoomMsg;this._sendLobbyMessage(t)}/**
	       * 随机加入或创建房间
	       * @param {string} roomName 房间名称
	       * @param {Object} [opts] 创建房间选项
	       * @param {Object} [opts.roomOptions] 创建房间选项，默认值为 null
	       * @param {Boolean} [opts.roomOptions.opened] 房间是否打开
	       * @param {Boolean} [opts.roomOptions.visible] 房间是否可见，只有「可见」的房间会出现在房间列表里
	       * @param {Number} [opts.roomOptions.emptyRoomTtl] 房间为空后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.playerTtl] 玩家掉线后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.maxPlayerCount] 最大玩家数量
	       * @param {Object} [opts.roomOptions.customRoomProperties] 自定义房间属性
	       * @param {Array.<string>} [opts.roomOptions.customRoomPropertyKeysForLobby] 在大厅中可获得的房间属性「键」数组
	       * @param {CreateRoomFlag} [opts.roomOptions.flag] 创建房间标记，可多选
	       * @param {Array.<string>} [opts.expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"joinOrCreateRoom",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.roomOptions,r=void 0===o?null:o,n=t.expectedUserIds,s=void 0===n?null:n;if("string"!=typeof e)throw new TypeError(e+" is not a string");if(this._playState!==Hr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);if(null!==r&&!(r instanceof Object))throw new TypeError(r+" is not a Object");if(null!==s&&!Array.isArray(s))throw new TypeError(s+" is not an array with string");// 拷贝房间参数
if(this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:e},null!=r){var a=X(r);this._cachedRoomMsg=Uo(this._cachedRoomMsg,a)}s&&(this._cachedRoomMsg.expectMembers=s);var i={cmd:"conv",op:"add",i:this._getMsgId(),cid:e,createOnNotFound:!0};s&&(i.expectMembers=s),this._sendLobbyMessage(i)}/**
	       * 随机加入房间
	       * @param {Object} [opts] 随机加入房间选项
	       * @param {Object} [opts.matchProperties] 匹配属性，默认值为 null
	       * @param {Array.<string>} [opts.expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"joinRandomRoom",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.matchProperties,o=void 0===t?null:t,r=e.expectedUserIds,n=void 0===r?null:r;if(null!==o&&"object"!==("undefined"==typeof o?"undefined":Yo(o)))throw new TypeError(o+" is not an object");if(null!==n&&!Array.isArray(n))throw new TypeError(n+" is not an array with string");if(this._playState!==Hr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId()},o&&(this._cachedRoomMsg.expectAttr=o),n&&(this._cachedRoomMsg.expectMembers=n);var s={cmd:"conv",op:"add-random"};o&&(s.expectAttr=o),n&&(s.expectMembers=n),this._sendLobbyMessage(s)}/**
	       * 设置房间开启 / 关闭
	       * @param {Boolean} opened 是否开启
	       */},{key:"setRoomOpened",value:function(e){if("boolean"!=typeof e)throw new TypeError(e+" is not a boolean value");if(null===this._room)throw new Error("room is null");if(this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);var t={cmd:"conv",op:"open",i:this._getMsgId(),toggle:e};this._sendGameMessage(t)}/**
	       * 设置房间可见 / 不可见
	       * @param {Boolean} visible 是否可见
	       */},{key:"setRoomVisible",value:function(e){if("boolean"!=typeof e)throw new TypeError(e+" is not a boolean value");if(null===this._room)throw new Error("room is null");if(this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);var t={cmd:"conv",op:"visible",i:this._getMsgId(),toggle:e};this._sendGameMessage(t)}/**
	       * 设置房主
	       * @param {number} newMasterId 新房主 ID
	       */},{key:"setMaster",value:function(e){if("number"!=typeof e)throw new TypeError(e+" is not a number");if(null===this._room)throw new Error("room is null");if(this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);var t={cmd:"conv",op:"update-master-client",i:this._getMsgId(),masterActorId:e};this._sendGameMessage(t)}/**
	       * 发送自定义消息
	       * @param {number|string} eventId 事件 ID
	       * @param {Object} eventData 事件参数
	       * @param {Object} options 发送事件选项
	       * @param {ReceiverGroup} options.receiverGroup 接收组
	       * @param {Array.<number>} options.targetActorIds 接收者 Id。如果设置，将会覆盖 receiverGroup
	       */},{key:"sendEvent",value:function(e,t,o){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError(e+" is not a string or number");if("object"!==("undefined"==typeof t?"undefined":Yo(t)))throw new TypeError(t+" is not an object");if(!(o instanceof Object))throw new TypeError(o+" is not a Object");if(void 0===o.receiverGroup&&void 0===o.targetActorIds)throw new TypeError("receiverGroup and targetActorIds are null");if(null===this._room)throw new Error("room is null");if(null===this._player)throw new Error("player is null");if(this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);var r={cmd:"direct",i:this._getMsgId(),eventId:e,msg:t,receiverGroup:o.receiverGroup,toActorIds:o.targetActorIds};this._sendGameMessage(r)}/**
	       * 离开房间
	       */},{key:"leaveRoom",value:function(){if(this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);var e={cmd:"conv",op:"remove",i:this._getMsgId(),cid:this.room.name};this._sendGameMessage(e)}/**
	       * 获取当前所在房间
	       * @return {Room}
	       * @readonly
	       */},{key:"_setRoomCustomProperties",// 设置房间属性
value:function(e,t){if("object"!==("undefined"==typeof e?"undefined":Yo(e)))throw new TypeError(e+" is not an object");if(t&&"object"!==("undefined"==typeof t?"undefined":Yo(t)))throw new TypeError(t+" is not an object");if(this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);var o={cmd:"conv",op:"update",i:this._getMsgId(),attr:e};t&&(o.expectAttr=t),this._sendGameMessage(o)}// 设置玩家属性
},{key:"_setPlayerCustomProperties",value:function(e,t,o){if("number"!=typeof e)throw new TypeError(e+" is not a number");if("object"!==("undefined"==typeof t?"undefined":Yo(t)))throw new TypeError(t+" is not an object");if(o&&"object"!==("undefined"==typeof o?"undefined":Yo(o)))throw new TypeError(o+" is not an object");if(this._playState!==Hr.GAME_OPEN)throw new Error("error play state: "+this._playState);var r={cmd:"conv",op:"update-player-prop",i:this._getMsgId(),targetActorId:e,attr:t};o&&(r.expectAttr=o),this._sendGameMessage(r)}// 开始大厅会话
},{key:"_lobbySessionOpen",value:function(){var e={cmd:"session",op:"open",i:this._getMsgId(),appId:this._appId,peerId:this.userId,sdkVersion:$r,gameVersion:this.gameVersion};this._sendLobbyMessage(e)}// 开始房间会话
},{key:"_gameSessionOpen",value:function(){var e={cmd:"session",op:"open",i:this._getMsgId(),appId:this._appId,peerId:this.userId,sdkVersion:$r,gameVersion:this.gameVersion};this._sendGameMessage(e)}// 发送大厅消息
},{key:"_sendLobbyMessage",value:function(e){this._send(this._lobbyWS,e,"Lobby",tn)}// 发送房间消息
},{key:"_sendGameMessage",value:function(e){this._send(this._gameWS,e,"Game ",on)}// 发送消息
},{key:"_send",value:function(e,t,o,r){var n=this;if("object"!==("undefined"==typeof t?"undefined":Yo(t)))throw new TypeError(t+" is not an object");var s=de(t);m(this.userId+" "+o+" msg: "+t.op+" \n-> "+s);var a=Zr.WebSocket;e.readyState===a.OPEN?(e.send(s),this._stopPing(),this._ping=setTimeout(function(){m("ping");n._send(e,{},o,r)},r)):(this._stopPing(),this._stopPong())}// 连接至大厅服务器
},{key:"_connectToMaster",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this._playState=Hr.CONNECTING,this._gameToLobby=t;var o=Zr.WebSocket;this._lobbyWS=new o(this._masterServer),this._lobbyWS.onopen=function(){m("Lobby websocket opened"),e._lobbySessionOpen()},this._lobbyWS.onmessage=function(t){e._stopPong(),e._startPongListener(e._lobbyWS,tn),R(e,t)},this._lobbyWS.onclose=function(){m("Lobby websocket closed"),e._playState===Hr.CONNECTING?e._masterServer===e._secondaryServer?e.emit(Tr.CONNECT_FAILED,{code:-2,detail:"Lobby socket connect failed"}):(e._masterServer=e._secondaryServer,e._connectToMaster()):(e._playState=Hr.CLOSED,e.emit(Tr.DISCONNECTED)),e._stopPing(),e._stopPong()},this._lobbyWS.onerror=function(e){g(e)}}// 连接至游戏服务器
},{key:"_connectToGame",value:function(){var e=this;this._playState=Hr.CONNECTING;var t=Zr.WebSocket;this._gameWS=new t(this._gameServer),this._gameWS.onopen=function(){m("Game websocket opened"),e._gameSessionOpen()},this._gameWS.onmessage=function(t){e._stopPong(),e._startPongListener(e._gameWS,on),K(e,t)},this._gameWS.onclose=function(){m("Game websocket closed"),e._playState===Hr.CONNECTING?e.emit(Tr.CONNECT_FAILED,{code:-2,detail:"Game socket connect failed"}):(e._playState=Hr.CLOSED,e.emit(Tr.DISCONNECTED)),e._stopPing(),e._stopPong()},this._gameWS.onerror=function(e){g(e)}}},{key:"_getMsgId",value:function(){return this._msgId+=1,this._msgId}},{key:"_stopConnectTimer",value:function(){this._connectTimer&&(clearTimeout(this._connectTimer),this._connectTimer=null)}},{key:"_stopPing",value:function(){this._ping&&(clearTimeout(this._ping),this._ping=null)}},{key:"_stopPong",value:function(){this._pong&&(clearTimeout(this._pong),this._pong=null)}},{key:"_startPongListener",value:function(e,t){var o=this;this._pong=setTimeout(function(){o._send(e,{},"",t),o._pong=setTimeout(function(){e.close()},t)},t*2)}},{key:"_cancelHttp",value:function(){this._httpReq&&this._httpReq.abort()}},{key:"_closeLobbySocket",value:function(e){Q(this._lobbyWS,e),this._lobbyWS=null}},{key:"_closeGameSocket",value:function(e){Q(this._gameWS,e),this._gameWS=null}},{key:"room",get:function(){return this._room}/**
	                                                                  * 获取当前玩家
	                                                                  * @return {Player}
	                                                                  * @readonly
	                                                                  */},{key:"player",get:function(){return this._player}/**
	                                                                                                                                     * 获取房间列表
	                                                                                                                                     * @return {Array.<LobbyRoom>}
	                                                                                                                                     * @readonly
	                                                                                                                                     */},{key:"lobbyRoomList",get:function(){return this._lobbyRoomList}}]),t}(Er);e.Play=rn,e.Region=Sr,e.Room=zr,e.Player=kr,e.Event=Tr,e.ReceiverGroup={/**
	                       * 其他人（除了自己之外的所有人）
	                       */Others:0,/**
	              * 所有人（包括自己）
	              */All:1,/**
	           * 主机客户端
	           */MasterClient:2},e.CreateRoomFlag={/**
	                        * Master 掉线后固定 Master
	                        */FixedMaster:1,/**
	                   * 只允许 Master 设置房间属性
	                   */MasterUpdateRoomProperties:2},e.setAdapters=/**
	                           * 设置适配器
	                           * @param {Object} newAdapters
	                           * @param {Function} newAdapters.WebSocketAdapter WebSocket 适配器，Cocos Creator 打包 android 平台时需要传入 CA 证书
	                           */function(e){Uo(Zr,e)},e.LogLevel=Br,e.setLogger=function(e){Uo(Yr,e)},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=play.min.js.map
