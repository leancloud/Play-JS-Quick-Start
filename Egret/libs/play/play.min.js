(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Play={})})(this,function(e){"use strict";var Q=Math.min,Z=Math.ceil,ee=Math.floor;function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function o(e,t){return t={exports:{}},e(t,t.exports),t.exports}/**
	 * Initialize a new `RequestBase`.
	 *
	 * @api public
	 */function r(e){if(e)return n(e)}/**
	 * Mixin the prototype properties.
	 *
	 * @param {Object} obj
	 * @return {Object}
	 * @api private
	 */function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}/**
	 * Clear previous timeout.
	 *
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Initialize a new `ResponseBase`.
	 *
	 * @api public
	 */function a(e){if(e)return s(e)}/**
	 * Mixin the prototype properties.
	 *
	 * @param {Object} obj
	 * @return {Object}
	 * @api private
	 */function s(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}/**
	 * Get case-insensitive `field` value.
	 *
	 * @param {String} field
	 * @return {String}
	 * @api public
	 */function d(){this._defaults=[]}/**
	 * Parse the given `str` and return milliseconds.
	 *
	 * @param {String} str
	 * @return {Number}
	 * @api private
	 */function l(e){if(e+="",!(100<e.length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?31557600000*o:"days"===r||"day"===r||"d"===r?86400000*o:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?3600000*o:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?60000*o:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1000*o:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?o:void 0}}}/**
	 * Short format for `ms`.
	 *
	 * @param {Number} ms
	 * @return {String}
	 * @api private
	 */function p(e){var t=Math.round;return 86400000<=e?t(e/86400000)+"d":3600000<=e?t(e/3600000)+"h":60000<=e?t(e/60000)+"m":1000<=e?t(e/1000)+"s":e+"ms"}/**
	 * Long format for `ms`.
	 *
	 * @param {Number} ms
	 * @return {String}
	 * @api private
	 */function c(e){return _(e,86400000,"day")||_(e,3600000,"hour")||_(e,60000,"minute")||_(e,1000,"second")||e+" ms"}/**
	 * Pluralization helper.
	 */function _(e,t,o){return e<t?void 0:e<1.5*t?ee(e/t)+" "+o:Z(e/t)+" "+o+"s"}/**
	   * 调试输出
	   * @param {String} log
	   */function u(e){Ur[Vr.Debug]("[DEBUG] "+e)}/**
	   * 警告输出
	   * @param {String} log
	   */function m(e){Ur[Vr.Warn]("[WARN] "+e)}/**
	   * 错误输出
	   * @param {String} log
	   */function y(e){Ur[Vr.Error]("[ERROR] "+e)}function g(e,t){y("error: "+ie(t)),e.emit(Or.ERROR,{code:t.reasonCode,detail:t.detail})}function b(e,t){var o=t.reasonCode,r=t.detail;y("reasonCode: "+o+", detail: "+r),e.emit(Or.ERROR,{code:o,detail:r})}/**
	 * 连接状态
	 */ // 连接建立
function C(e,t){var o=this;if(t.reasonCode)e._closeLobbySocket(function(){e._playState=Jr.CLOSED;var r=t.reasonCode,n=t.detail;o.emit(Or.CONNECT_FAILED,{code:r,detail:n})});else{e._playState=Jr.LOBBY_OPEN,e._sessionToken=t.st;var r=new hr(e);r._userId=e.userId,e._player=r,e._gameToLobby?(e.emit(Or.ROOM_LEFT),e._gameToLobby=!1):e.emit(Or.CONNECTED)}}// 加入大厅
function O(e,t){t.reasonCode?b(e,t):(e._inLobby=!0,e.emit(Or.LOBBY_JOINED))}// 离开大厅
function h(e){e._inLobby=!1,e.emit(Or.LOBBY_LEFT)}// 房间列表更新
function E(e,t){e._lobbyRoomList=[];for(var o,r=0;r<t.list.length;r+=1)o=t.list[r],e._lobbyRoomList[r]=new Er(o);e.emit(Or.LOBBY_ROOM_LIST_UPDATED)}function S(e,t){e._inLobby&&(e._inLobby=!1,e.emit(Or.LOBBY_LEFT)),e._gameServer=t.addr||t.secureAddr,t.cid&&(e._cachedRoomMsg.cid=t.cid),e._connectToGame()}// 创建房间
function T(e,t){t.reasonCode?e.emit(Or.ROOM_CREATE_FAILED,{code:t.reasonCode,detail:t.detail}):(e._cachedRoomMsg.op="start",S(e,t))}// 加入房间
/* eslint no-param-reassign: ["error", { "props": false }] */function v(e,t){t.reasonCode?e.emit(Or.ROOM_JOIN_FAILED,{code:t.reasonCode,detail:t.detail}):(e._cachedRoomMsg.op="add",S(e,t))}// 大厅消息处理
function P(e,t){var o=JSON.parse(t.data);switch(u(e.userId+" Lobby msg: "+o.op+" \n<- "+t.data),o.cmd){case"session":switch(o.op){case"opened":C(e,o);break;default:y("no handler for lobby msg: "+o.op);}break;case"lobby":switch(o.op){case"added":O(e,o);break;case"room-list":E(e,o);break;case"remove":h(e);break;default:y("no handler for lobby msg: "+o.op);}break;case"statistic":break;case"conv":switch(o.op){case"results":E(e,o);break;case"started":T(e,o);break;case"added":v(e,o);break;case"random-added":v(e,o);break;default:y("no handler for lobby msg: "+o.op);}break;case"events":// TODO
break;case"error":g(e,o);break;default:o.cmd&&y("no handler for lobby msg: "+o.cmd);}}// 连接建立后创建 / 加入房间
function R(e,t){t.reasonCode?(e._playState=Jr.LOBBY_OPEN,e._closeGameSocket(function(){b(e,t)})):(e._cachedRoomMsg.i=e._getMsgId(),e._sendGameMessage(e._cachedRoomMsg))}function I(e){// 收到 closed 协议后，客户端主动断开连接
e._closeGameSocket()}// 创建房间
function M(e,t){t.reasonCode?(e._playState=Jr.LOBBY_OPEN,e._closeGameSocket(function(){e.emit(Or.ROOM_CREATE_FAILED,{code:t.reasonCode,detail:t.detail})})):(e._playState=Jr.GAME_OPEN,e._room=Zr._newFromJSONObject(e,t),e.emit(Or.ROOM_CREATED),e.emit(Or.ROOM_JOINED),e._closeLobbySocket())}// 加入房间
function L(e,t){t.reasonCode?(e._playState=Jr.LOBBY_OPEN,e._closeGameSocket(function(){e.emit(Or.ROOM_JOIN_FAILED,{code:t.reasonCode,detail:t.detail})})):(e._playState=Jr.GAME_OPEN,e._room=Zr._newFromJSONObject(e,t),e.emit(Or.ROOM_JOINED),e._closeLobbySocket())}// 有新玩家加入房间
function N(e,t){var o=hr._newFromJSONObject(e,t.member);e._room._addPlayer(o),e.emit(Or.PLAYER_ROOM_JOINED,{newPlayer:o})}// 有玩家离开房间
function x(e,t){if(t.reasonCode)b(e,t);else{var o=t.initByActor,r=e._room.getPlayer(o);e._room._removePlayer(o),e.emit(Or.PLAYER_ROOM_LEFT,{leftPlayer:r})}}// 主机切换应答
function A(e,t){t.reasonCode&&b(e,t)}// 主机切换
function F(e,t){if(t.reasonCode)b(e,t);else if(null===t.masterActorId)e._room._masterActorId=-1,e.emit(Or.MASTER_SWITCHED,{newMaster:null});else{e._room._masterActorId=t.masterActorId;var o=e._room.getPlayer(t.masterActorId);e.emit(Or.MASTER_SWITCHED,{newMaster:o})}}function D(e,t){t.reasonCode&&b(e,t)}// 房间开启 / 关闭
function w(e,t){var o=t.toggle;e._room._opened=o,e.emit(Or.ROOM_OPEN_CHANGED,{opened:o})}function G(e,t){t.reasonCode&&b(e,t)}// 房间是否可见
function B(e,t){var o=t.toggle;e._room._visible=o,e.emit(Or.ROOM_VISIBLE_CHANGED,{visible:o})}// 房间属性变更应答
function Y(e,t){t.reasonCode&&b(e,t)}// 房间属性变更
function H(e,t){var o=t.attr;e._room._mergeProperties(o),e.emit(Or.ROOM_CUSTOM_PROPERTIES_CHANGED,{changedProps:o})}// 玩家属性变更应答
function W(e,t){t.reasonCode&&b(e,t)}// 玩家属性变更
function q(e,t){var o=e._room.getPlayer(t.actorId);o._mergeProperties(t.attr),e.emit(Or.PLAYER_CUSTOM_PROPERTIES_CHANGED,{player:o,changedProps:t.attr})}// 玩家下线
function V(e,t){var o=e._room.getPlayer(t.initByActor);o._setActive(!1),e.emit(Or.PLAYER_ACTIVITY_CHANGED,{player:o})}// 玩家上线
function U(e,t){var o=e._room.getPlayer(t.member.actorId);o._initWithJSONObject(t.member),o._setActive(!0),e.emit(Or.PLAYER_ACTIVITY_CHANGED,{player:o})}// 离开房间
/* eslint no-param-reassign: ["error", { "props": false }] */function J(e){// 清理工作
// 离开房间时就主动断开连接
e._room=null,e._player=null,e._closeGameSocket(function(){e._connectToMaster(!0)})}// 自定义事件
function z(e,t){e.emit(Or.CUSTOM_EVENT,{eventId:t.eventId,eventData:t.msg,senderId:t.fromActorId})}function $(e,t){var o=JSON.parse(t.data);switch(u(e.userId+" Game  msg: "+o.op+" \n<- "+t.data),o.cmd){case"session":switch(o.op){case"opened":R(e,o);break;case"closed":I(e);break;default:y("no handler for op: "+o.op);}break;case"conv":switch(o.op){case"started":M(e,o);break;case"added":L(e,o);break;case"members-joined":N(e,o);break;case"members-left":x(e,o);break;case"master-client-updated":A(e,o);break;case"master-client-changed":F(e,o);break;case"opened":D(e,o);break;case"opened-notify":w(e,o);break;case"visible":G(e,o);break;case"visible-notify":B(e,o);break;case"updated":Y(e,o);break;case"updated-notify":H(e,o);break;case"player-prop-updated":W(e,o);break;case"player-props":q(e,o);break;case"members-offline":V(e,o);break;case"members-online":U(e,o);break;case"removed":J(e);break;default:y("no handler for game msg: "+o.op);}break;case"direct":z(e,o);break;case"ack":// ignore
break;case"events":// TODO
break;case"error":g(e,o);break;default:o.cmd&&y("no handler for cmd: "+t.data);}}function K(e){var t={};return e.opened||(t.open=e.opened),e.visible||(t.visible=e.visible),0<e.emptyRoomTtl&&(t.emptyRoomTtl=e.emptyRoomTtl),0<e.playerTtl&&(t.playerTtl=e.playerTtl),0<e.maxPlayerCount&&10>e.maxPlayerCount&&(t.maxMembers=e.maxPlayerCount),e.customRoomProperties&&(t.attr=e.customRoomProperties),e.customRoomPropertyKeysForLobby&&(t.lobbyAttrKeys=e.customRoomPropertyKeysForLobby),e.flag&&(t.flag=e.flag),t}function X(e,t){var o=e;if(o){o.onopen=null,o.onconnect=null,o.onmessage=null,o.onclose=t;try{o.close()}catch(t){u("close socket exception: "+t)}}else t&&t()}/**
	   * Client 客户端类
	   */var te="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,oe=o(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),re=oe.version,ne=oe.JSON||(oe.JSON={stringify:JSON.stringify}),ae=function(){// eslint-disable-line no-unused-vars
return ne.stringify.apply(ne,arguments)},se=o(function(e){e.exports={default:ae,__esModule:!0}}),ie=t(se),de=function(e){return isNaN(e=+e)?0:(0<e?ee:Z)(e)},le=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},pe=o(function(e){// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self// eslint-disable-next-line no-new-func
:Function("return this")();"number"==typeof __g&&(__g=t)}),ce=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},_e=function(e,t,o){return(ce(e),void 0===t)?e:1===o?function(o){return e.call(t,o)}:2===o?function(o,r){return e.call(t,o,r)}:3===o?function(o,r,n){return e.call(t,o,r,n)}:function()/* ...args */{return e.apply(t,arguments)}},ue=function(e){return"object"==typeof e?null!==e:"function"==typeof e},me=function(e){if(!ue(e))throw TypeError(e+" is not an object!");return e},ye=function(e){try{return!!e()}catch(t){return!0}},ge=!ye(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),fe=pe.document,be=ue(fe)&&ue(fe.createElement),Ce=function(e){return be?fe.createElement(e):{}},Oe=!ge&&!ye(function(){return 7!=Object.defineProperty(Ce("div"),"a",{get:function(){return 7}}).a}),he=function(e,t){if(!ue(e))return e;var o,r;if(t&&"function"==typeof(o=e.toString)&&!ue(r=o.call(e)))return r;if("function"==typeof(o=e.valueOf)&&!ue(r=o.call(e)))return r;if(!t&&"function"==typeof(o=e.toString)&&!ue(r=o.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Ee=Object.defineProperty,Se=ge?Object.defineProperty:function(e,t,o){if(me(e),t=he(t,!0),me(o),Oe)try{return Ee(e,t,o)}catch(t){/* empty */}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e},f={f:Se},Te=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ve=ge?function(e,t,o){return f.f(e,t,Te(1,o))}:function(e,t,o){return e[t]=o,e},ke={}.hasOwnProperty,Pe=function(e,t){return ke.call(e,t)},Re="prototype",Ie=function(e,t,o){var r,n,a,s=e&Ie.F,i=e&Ie.G,d=e&Ie.S,l=e&Ie.P,p=e&Ie.B,c=e&Ie.W,_=i?oe:oe[t]||(oe[t]={}),u=_[Re],m=i?pe:d?pe[t]:(pe[t]||{})[Re];for(r in i&&(o=t),o)// contains in native
n=!s&&m&&void 0!==m[r],n&&Pe(_,r)||(a=n?m[r]:o[r],_[r]=i&&"function"!=typeof m[r]?o[r]// bind timers to global for call from export context
:p&&n?_e(a,pe)// wrap global constructors for prevent change them in library
:c&&m[r]==a?function(e){var t=function(t,o,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,o);}return new e(t,o,r)}return e.apply(this,arguments)};return t[Re]=e[Re],t;// make static versions for prototype methods
}(a):l&&"function"==typeof a?_e(Function.call,a):a,l&&((_.virtual||(_.virtual={}))[r]=a,e&Ie.R&&u&&!u[r]&&ve(u,r,a)))};Ie.F=1,Ie.G=2,Ie.S=4,Ie.P=8,Ie.B=16,Ie.W=32,Ie.U=64,Ie.R=128;// real proto method for `library`
var Me=Ie,Le=ve,Ne={}.toString,xe=function(e){return Ne.call(e).slice(8,-1)},Ae=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==xe(e)?e.split(""):Object(e)},Fe=function(e){return Ae(le(e))},De=function(e){return 0<e?Q(de(e),9007199254740991):0;// pow(2, 53) - 1 == 9007199254740991
},we=Math.max,je=function(e,t){return e=de(e),0>e?we(e+t,0):Q(e,t)},Ge=o(function(e){var t=pe["__core-js_shared__"]||(pe["__core-js_shared__"]={});(e.exports=function(e,o){return t[e]||(t[e]=o===void 0?{}:o)})("versions",[]).push({version:oe.version,mode:"pure",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})}),Be=0,Ye=Math.random(),He=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++Be+Ye).toString(36))},We=Ge("keys"),qe=function(e){return We[e]||(We[e]=He(e))},Ve=function(e){return function(t,o,r){var n,a=Fe(t),s=De(a.length),i=je(r,s);// Array#includes uses SameValueZero equality algorithm
// eslint-disable-next-line no-self-compare
if(e&&o!=o){for(;s>i;)// eslint-disable-next-line no-self-compare
if(n=a[i++],n!=n)return!0;// Array#indexOf ignores holes, Array#includes - not
}else for(;s>i;i++)if((e||i in a)&&a[i]===o)return e||i||0;return!e&&-1}}(!1),Ue=qe("IE_PROTO"),Je=function(e,t){var o,r=Fe(e),n=0,a=[];for(o in r)o!=Ue&&Pe(r,o)&&a.push(o);// Don't enum bug & hidden keys
for(;t.length>n;)Pe(r,o=t[n++])&&(~Ve(a,o)||a.push(o));return a},ze=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$e=Object.keys||function(e){return Je(e,ze)},Ke=ge?Object.defineProperties:function(e,t){me(e);for(var o,r=$e(t),n=r.length,a=0;n>a;)f.f(e,o=r[a++],t[o]);return e},Xe=pe.document,Qe=Xe&&Xe.documentElement,Ze=qe("IE_PROTO"),et=function(){/* empty */},tt="prototype",ot=function(){// Thrash, waste and sodomy: IE GC bug
var e,t=Ce("iframe"),o=ze.length,r="<",n=">";for(t.style.display="none",Qe.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+n+"document.F=Object"+r+"/script"+n),e.close(),ot=e.F;o--;)delete ot[tt][ze[o]];return ot()},rt=Object.create||function(e,t){var o;return null===e?o=ot():(et[tt]=me(e),o=new et,et[tt]=null,o[Ze]=e),void 0===t?o:Ke(o,t)},nt=o(function(e){var t=Ge("wks"),o=pe.Symbol,r="function"==typeof o,n=e.exports=function(e){return t[e]||(t[e]=r&&o[e]||(r?o:He)("Symbol."+e))};n.store=t}),at=f.f,st=nt("toStringTag"),it=function(e,t,o){e&&!Pe(e=o?e:e.prototype,st)&&at(e,st,{configurable:!0,value:t})},dt={};ve(dt,nt("iterator"),function(){return this});var lt=function(e,t,o){e.prototype=rt(dt,{next:Te(1,o)}),it(e,t+" Iterator")},pt=function(e){return Object(le(e))},ct=qe("IE_PROTO"),_t=Object.prototype,ut=Object.getPrototypeOf||function(e){return e=pt(e),Pe(e,ct)?e[ct]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?_t:null},mt=nt("iterator"),yt=!([].keys&&"next"in[].keys()),gt="keys",ft="values",bt=function(e,t,o,r,n,a,s){lt(o,t,r);var i,d,l,p=function(e){return!yt&&e in u?u[e]:e===gt?function(){return new o(this,e)}:e===ft?function(){return new o(this,e)}:function(){return new o(this,e)}},c=n==ft,_=!1,u=e.prototype,m=u[mt]||u["@@iterator"]||n&&u[n],y=m||p(n),g=n?c?p("entries"):y:void 0,f="Array"==t?u.entries||m:m;if(f&&(l=ut(f.call(new e)),l!==Object.prototype&&l.next&&it(l,t+" Iterator",!0)),c&&m&&m.name!==ft&&(_=!0,y=function(){return m.call(this)}),s&&(yt||_||!u[mt])&&ve(u,mt,y),n)if(i={values:c?y:p(ft),keys:a?y:p(gt),entries:g},s)for(d in i)d in u||Le(u,d,i[d]);else Me(Me.P+Me.F*(yt||_),t,i);return i},Ct=function(e){return function(t,o){var r,n,d=le(t)+"",s=de(o),i=d.length;return 0>s||s>=i?e?"":void 0:(r=d.charCodeAt(s),55296>r||56319<r||s+1===i||56320>(n=d.charCodeAt(s+1))||57343<n?e?d.charAt(s):r:e?d.slice(s,s+2):(r-55296<<10)+(n-56320)+65536)}}(!0);// 7.1.13 ToObject(argument)
bt(String,"String",function(e){// target
this._t=e+"",this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=Ct(t,o),this._i+=e.length,{value:e,done:!1})});for(var Ot=function(e,t){return{value:t,done:!!e}},ht=bt(Array,"Array",function(e,t){// target
// next index
this._t=Fe(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,Ot(1)):"keys"==t?Ot(0,o):"values"==t?Ot(0,e[o]):Ot(0,[o,e[o]])},"values"),Et=nt("toStringTag"),St="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Tt=0;Tt<St.length;Tt++){var vt=St[Tt],kt=pe[vt],Pt=kt&&kt.prototype;Pt&&!Pt[Et]&&ve(Pt,Et,vt)}var Rt={f:nt},It=Rt.f("iterator"),Mt=o(function(e){e.exports={default:It,__esModule:!0}});t(Mt);var Lt=o(function(e){var t=He("meta"),o=f.f,r=0,n=Object.isExtensible||function(){return!0},a=!ye(function(){return n(Object.preventExtensions({}))}),s=function(e){o(e,t,{value:{i:"O"+ ++r,// object ID
w:{}// weak collections IDs
}})},i=e.exports={KEY:t,NEED:!1,fastKey:function(e,o){// return primitive with prefix
if(!ue(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Pe(e,t)){// can't set metadata to uncaught frozen object
if(!n(e))return"F";// not necessary to add metadata
if(!o)return"E";// add missing metadata
s(e)}return e[t].i},getWeak:function(e,o){if(!Pe(e,t)){// can't set metadata to uncaught frozen object
if(!n(e))return!0;// not necessary to add metadata
if(!o)return!1;// add missing metadata
s(e)}return e[t].w},onFreeze:function(e){return a&&i.NEED&&n(e)&&!Pe(e,t)&&s(e),e}}}),Nt=Lt.KEY,xt=Lt.NEED,At=Lt.fastKey,Ft=Lt.getWeak,Dt=Lt.onFreeze,wt=f.f,jt=function(e){var t=oe.Symbol||(oe.Symbol={});"_"==e.charAt(0)||e in t||wt(t,e,{value:Rt.f(e)})},Gt=Object.getOwnPropertySymbols,Bt={f:Gt},Yt={}.propertyIsEnumerable,Ht={f:Yt},Wt=function(e){var t=$e(e),o=Bt.f;if(o)for(var r,n=o(e),a=Ht.f,s=0;n.length>s;)a.call(e,r=n[s++])&&t.push(r);return t},qt=Array.isArray||function(e){return"Array"==xe(e)},Vt=ze.concat("length","prototype"),Ut=Object.getOwnPropertyNames||function(e){return Je(e,Vt)},Jt={f:Ut},zt=Jt.f,$t={}.toString,Kt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Xt=function(e){try{return zt(e)}catch(t){return Kt.slice()}},Qt={f:function(e){return Kt&&"[object Window]"==$t.call(e)?Xt(e):zt(Fe(e))}},Zt=Object.getOwnPropertyDescriptor,eo=ge?Zt:function(e,t){if(e=Fe(e),t=he(t,!0),Oe)try{return Zt(e,t)}catch(t){/* empty */}return Pe(e,t)?Te(!Ht.f.call(e,t),e[t]):void 0},to={f:eo},oo=Lt.KEY,ro=to.f,no=f.f,ao=Qt.f,so=pe.Symbol,io=pe.JSON,lo=io&&io.stringify,po="prototype",co=nt("_hidden"),_o=nt("toPrimitive"),uo={}.propertyIsEnumerable,mo=Ge("symbol-registry"),yo=Ge("symbols"),go=Ge("op-symbols"),fo=Object[po],bo="function"==typeof so,Co=pe.QObject,Oo=!Co||!Co[po]||!Co[po].findChild,ho=ge&&ye(function(){return 7!=rt(no({},"a",{get:function(){return no(this,"a",{value:7}).a}})).a})?function(e,t,o){var r=ro(fo,t);r&&delete fo[t],no(e,t,o),r&&e!==fo&&no(fo,t,r)}:no,Eo=function(e){var t=yo[e]=rt(so[po]);return t._k=e,t},So=bo&&"symbol"==typeof so.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof so},To=function(e,t,o){return e===fo&&To(go,t,o),me(e),t=he(t,!0),me(o),Pe(yo,t)?(o.enumerable?(Pe(e,co)&&e[co][t]&&(e[co][t]=!1),o=rt(o,{enumerable:Te(0,!1)})):(!Pe(e,co)&&no(e,co,Te(1,{})),e[co][t]=!0),ho(e,t,o)):no(e,t,o)},vo=function(e,t){me(e);for(var o,r=Wt(t=Fe(t)),n=0,a=r.length;a>n;)To(e,o=r[n++],t[o]);return e},ko=function(e){var t=uo.call(this,e=he(e,!0));return(this!==fo||!Pe(yo,e)||Pe(go,e))&&(!(t||!Pe(this,e)||!Pe(yo,e)||Pe(this,co)&&this[co][e])||t)},Po=function(e,t){if(e=Fe(e),t=he(t,!0),e!==fo||!Pe(yo,t)||Pe(go,t)){var o=ro(e,t);return o&&Pe(yo,t)&&!(Pe(e,co)&&e[co][t])&&(o.enumerable=!0),o}},Ro=function(e){for(var t,o=ao(Fe(e)),r=[],n=0;o.length>n;)Pe(yo,t=o[n++])||t==co||t==oo||r.push(t);return r},Io=function(e){for(var t,o=e===fo,r=ao(o?go:Fe(e)),n=[],a=0;r.length>a;)Pe(yo,t=r[a++])&&(!o||Pe(fo,t))&&n.push(yo[t]);return n};bo||(so=function(){if(this instanceof so)throw TypeError("Symbol is not a constructor!");var e=He(0<arguments.length?arguments[0]:void 0),t=function(o){this===fo&&t.call(go,o),Pe(this,co)&&Pe(this[co],e)&&(this[co][e]=!1),ho(this,e,Te(1,o))};return ge&&Oo&&ho(fo,e,{configurable:!0,set:t}),Eo(e)},Le(so[po],"toString",function(){return this._k}),to.f=Po,f.f=To,Jt.f=Qt.f=Ro,Ht.f=ko,Bt.f=Io,ge&&!!0&&Le(fo,"propertyIsEnumerable",ko,!0),Rt.f=function(e){return Eo(nt(e))}),Me(Me.G+Me.W+Me.F*!bo,{Symbol:so});for(var Mo=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],Lo=0;Mo.length>Lo;)nt(Mo[Lo++]);for(var No=$e(nt.store),xo=0;No.length>xo;)jt(No[xo++]);Me(Me.S+Me.F*!bo,"Symbol",{// 19.4.2.1 Symbol.for(key)
for:function(e){return Pe(mo,e+="")?mo[e]:mo[e]=so(e)},// 19.4.2.5 Symbol.keyFor(sym)
keyFor:function(e){if(!So(e))throw TypeError(e+" is not a symbol!");for(var t in mo)if(mo[t]===e)return t},useSetter:function(){Oo=!0},useSimple:function(){Oo=!1}}),Me(Me.S+Me.F*!bo,"Object",{// 19.1.2.2 Object.create(O [, Properties])
create:function(e,t){return t===void 0?rt(e):vo(rt(e),t)},// 19.1.2.4 Object.defineProperty(O, P, Attributes)
defineProperty:To,// 19.1.2.3 Object.defineProperties(O, Properties)
defineProperties:vo,// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
getOwnPropertyDescriptor:Po,// 19.1.2.7 Object.getOwnPropertyNames(O)
getOwnPropertyNames:Ro,// 19.1.2.8 Object.getOwnPropertySymbols(O)
getOwnPropertySymbols:Io}),io&&Me(Me.S+Me.F*(!bo||ye(function(){var e=so();// MS Edge converts symbol values to JSON as {}
// WebKit converts symbol values to JSON as null
// V8 throws on boxed symbols
return"[null]"!=lo([e])||"{}"!=lo({a:e})||"{}"!=lo(Object(e))})),"JSON",{stringify:function(e){for(var t,o,r=[e],n=1;arguments.length>n;)r.push(arguments[n++]);if(o=t=r[1],(ue(t)||void 0!==e)&&!So(e))return qt(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!So(t))return t}),r[1]=t,lo.apply(io,r);// IE8 returns string on undefined
}}),so[po][_o]||ve(so[po],_o,so[po].valueOf),it(so,"Symbol"),it(Math,"Math",!0),it(pe.JSON,"JSON",!0),jt("asyncIterator"),jt("observable");var Ao=oe.Symbol,Fo=o(function(e){e.exports={default:Ao,__esModule:!0}});t(Fo);var Do=o(function(e,t){function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=o(Mt),n=o(Fo),a="function"==typeof n.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};t.default="function"==typeof n.default&&"symbol"===a(r.default)?function(e){return"undefined"==typeof e?"undefined":a(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":"undefined"==typeof e?"undefined":a(e)}}),wo=t(Do),jo=Object.assign,Go=!jo||ye(function(){var e={},t={},o=Symbol(),r="abcdefghijklmnopqrst";return e[o]=7,r.split("").forEach(function(e){t[e]=e}),7!=jo({},e)[o]||Object.keys(jo({},t)).join("")!=r})?function(e){// eslint-disable-line no-unused-vars
for(var t=pt(e),o=arguments.length,r=1,n=Bt.f,a=Ht.f;o>r;)for(var s,i=Ae(arguments[r++]),d=n?$e(i).concat(n(i)):$e(i),l=d.length,p=0;l>p;)a.call(i,s=d[p++])&&(t[s]=i[s]);return t}:jo;Me(Me.S+Me.F,"Object",{assign:Go});var Bo=oe.Object.assign,Yo=o(function(e){e.exports={default:Bo,__esModule:!0}}),Ho=t(Yo);(function(e,t){var o=(oe.Object||{})[e]||Object[e],r={};r[e]=t(o),Me(Me.S+Me.F*ye(function(){o(1)}),"Object",r)})("getPrototypeOf",function(){return function(e){return ut(pt(e))}});var Wo=oe.Object.getPrototypeOf,qo=o(function(e){e.exports={default:Wo,__esModule:!0}}),Vo=t(qo),Uo=o(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}),Jo=t(Uo);Me(Me.S+Me.F*!ge,"Object",{defineProperty:f.f});var zo=oe.Object,$o=function(e,t,o){return zo.defineProperty(e,t,o)},Ko=o(function(e){e.exports={default:$o,__esModule:!0}});t(Ko);var Xo=o(function(e,t){t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(Ko);t.default=function(){function e(e,t){for(var r,n=0;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()}),Qo=t(Xo),Zo=o(function(e,t){t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(Do);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"===("undefined"==typeof t?"undefined":(0,o.default)(t))||"function"==typeof t)?t:e}}),er=t(Zo),tr=function(e,t){if(me(e),!ue(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},or={set:Object.setPrototypeOf||("__proto__"in{}?// eslint-disable-line
function(e,t,o){try{o=_e(Function.call,to.f(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,r){return tr(e,r),t?e.__proto__=r:o(e,r),e}}({},!1):void 0),check:tr};Me(Me.S,"Object",{setPrototypeOf:or.set});var rr=oe.Object.setPrototypeOf,nr=o(function(e){e.exports={default:rr,__esModule:!0}});t(nr),Me(Me.S,"Object",{create:rt});var ar=oe.Object,sr=function(e,t){return ar.create(e,t)},ir=o(function(e){e.exports={default:sr,__esModule:!0}});t(ir);var dr=o(function(e,t){function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=o(nr),n=o(ir),a=o(Do);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,a.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}}),lr=t(dr),pr=o(function(e){/**
	 * Initialize a new `Emitter`.
	 *
	 * @api public
	 */function t(e){if(e)return o(e)}/**
	 * Mixin the emitter properties.
	 *
	 * @param {Object} obj
	 * @return {Object}
	 * @api private
	 */function o(e){for(var o in t.prototype)e[o]=t.prototype[o];return e}/**
	 * Listen on the given `event` with `fn`.
	 *
	 * @param {String} event
	 * @param {Function} fn
	 * @return {Emitter}
	 * @api public
	 */ /**
	 * Adds an `event` listener that will be invoked a single
	 * time then automatically removed.
	 *
	 * @param {String} event
	 * @param {Function} fn
	 * @return {Emitter}
	 * @api public
	 */ /**
	 * Remove the given callback for `event` or all
	 * registered callbacks.
	 *
	 * @param {String} event
	 * @param {Function} fn
	 * @return {Emitter}
	 * @api public
	 */ /**
	 * Emit `event` with the given args.
	 *
	 * @param {String} event
	 * @param {Mixed} ...
	 * @return {Emitter}
	 */ /**
	 * Return array of callbacks for `event`.
	 *
	 * @param {String} event
	 * @return {Array}
	 * @api public
	 */ /**
	 * Check if this emitter has `event` handlers.
	 *
	 * @param {String} event
	 * @return {Boolean}
	 * @api public
	 */e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function o(){this.off(e,o),t.apply(this,arguments)}return o.fn=t,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){// all
if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;// specific event
var o=this._callbacks["$"+e];if(!o)return this;// remove all handlers
if(1==arguments.length)return delete this._callbacks["$"+e],this;// remove specific handler
for(var r,n=0;n<o.length;n++)if(r=o[n],r===t||r.fn===t){o.splice(n,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),o=this._callbacks["$"+e];if(o){o=o.slice(0);for(var r=0,n=o.length;r<n;++r)o[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),cr=/**
	 * Check if `obj` is an object.
	 *
	 * @param {Object} obj
	 * @return {Boolean}
	 * @api private
	 */function(e){return null!==e&&"object"==typeof e};r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)"deadline"==t?this._timeout=e.deadline:"response"==t?this._responseTimeout=e.response:console.warn("Unknown timeout option",t);return this},r.prototype.retry=function(e,t){return(0===arguments.length||!0===e)&&(e=1),0>=e&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var _r=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];/**
	 * Determine if a request should be retried.
	 * (Borrowed from segmentio/superagent-retry)
	 *
	 * @param {Error} err
	 * @param {Response} [res]
	 * @returns {Boolean}
	 */r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var o=this._retryCallback(e,t);if(!0===o)return!0;if(!1===o)return!1;// undefined falls back to defaults
}catch(t){console.error(t)}if(t&&t.status&&500<=t.status&&501!=t.status)return!0;if(e){if(e.code&&~_r.indexOf(e.code))return!0;// Superagent timeout
if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var o=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){o.end(function(o,r){o?t(o):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype["catch"]=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):200<=e.status&&300>e.status)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(cr(e)){for(var o in e)this.set(o,e[o]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){// name should be either a string or an object.
if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),cr(e)){for(var o in e)this.field(o,e[o]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}// val should be defined now
if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(e,t,o,r){switch(o.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e);}return this},r.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=cr(e),o=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:!this._isHost(e)&&(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");// merge
if(t&&cr(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(o||this.type("form"),o=this._header["content-type"],this._data="application/x-www-form-urlencoded"==o?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(o||this.type("json"),this);// default to json
},r.prototype.sortQuery=function(e){return this._sort="undefined"==typeof e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join("&");// Makes the call idempotent
if(e&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(0<=t){var o=this.url.substring(t+1).split("&");"function"==typeof this._sort?o.sort(this._sort):o.sort(),this.url=this.url.substring(0,t)+"?"+o.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(e,t,o){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=o,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;// deadline
this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};/**
	 * Return the mime type for the given `str`.
	 *
	 * @param {String} str
	 * @return {String}
	 * @api private
	 */var ur={type:function(e){return e.split(/ *; */).shift()},params:function(e){return e.split(/ *; */).reduce(function(e,t){var o=t.split(/ *= */),r=o.shift(),n=o.shift();return r&&n&&(e[r]=n),e},{})},parseLinks:function(e){return e.split(/ *, */).reduce(function(e,t){var o=t.split(/ *; */),r=o[0].slice(1,-1),n=o[1].split(/ *= */)[1].slice(1,-1);return e[n]=r,e},{})},cleanHeader:function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}};/**
	 * Return header field parameters.
	 *
	 * @param {String} str
	 * @return {Object}
	 * @api private
	 */a.prototype.get=function(e){return this.header[e.toLowerCase()]},a.prototype._setHeaderProperties=function(e){// TODO: moar!
// TODO: make this a util
// content-type
var t=e["content-type"]||"";this.type=ur.type(t);// params
var o=ur.params(t);for(var r in o)this[r]=o[r];this.links={};// links
try{e.link&&(this.links=ur.parseLinks(e.link))}catch(e){// ignore
}},a.prototype._setStatusProperties=function(e){var t=0|e/100;// status / class
// basics
// sugar
this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=!(4!=t&&5!=t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e},["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){/** Default setting for all requests from this agent */d.prototype[e]=function()/*varargs*/{return this._defaults.push({fn:e,arguments:arguments}),this}}),d.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})};var mr,yr=d,gr=o(function(e,t){/**
	 * Noop.
	 */function o(){}/**
	 * Expose `request`.
	 */ /**
	 * Serialize the given `obj`.
	 *
	 * @param {Object} obj
	 * @return {String}
	 * @api private
	 */function n(e){if(!cr(e))return e;var t=[];for(var o in e)s(t,o,e[o]);return t.join("&")}/**
	 * Helps 'serialize' with serializing arrays.
	 * Mutates the pairs array.
	 *
	 * @param {Array} pairs
	 * @param {String} key
	 * @param {Mixed} val
	 */function s(e,t,o){if(!(null!=o))null===o&&e.push(encodeURIComponent(t));else if(Array.isArray(o))o.forEach(function(o){s(e,t,o)});else if(cr(o))for(var r in o)s(e,t+"["+r+"]",o[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}/**
	 * Expose serialization method.
	 */ /**
	  * Parse the given x-www-form-urlencoded `str`.
	  *
	  * @param {String} str
	  * @return {Object}
	  * @api private
	  */function i(e){for(var t,o,r={},n=e.split("&"),a=0,s=n.length;a<s;++a)t=n[a],o=t.indexOf("="),-1==o?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,o))]=decodeURIComponent(t.slice(o+1));return r}/**
	 * Expose parser.
	 */ /**
	 * Parse the given header `str` into
	 * an object containing the mapped fields.
	 *
	 * @param {String} str
	 * @return {Object}
	 * @api private
	 */function d(e){for(var t,o,r,n,a=e.split(/\r?\n/),s={},d=0,l=a.length;d<l;++d)(o=a[d],t=o.indexOf(":"),-1!==t)&&(r=o.slice(0,t).toLowerCase(),n=y(o.slice(t+1)),s[r]=n);return s}/**
	 * Check if `mime` is json or has +json structured syntax suffix.
	 *
	 * @param {String} mime
	 * @return {Boolean}
	 * @api private
	 */function l(e){// should match /json or +json
// but not /json-seq
return /[\/+]json($|[^-\w])/.test(e)}/**
	 * Initialize a new `Response` with the given `xhr`.
	 *
	 *  - set flags (.ok, .error, etc)
	 *  - parse header
	 *
	 * Examples:
	 *
	 *  Aliasing `superagent` as `request` is nice:
	 *
	 *      request = superagent;
	 *
	 *  We can use the promise-like API, or pass callbacks:
	 *
	 *      request.get('/').end(function(res){});
	 *      request.get('/', function(res){});
	 *
	 *  Sending data can be chained:
	 *
	 *      request
	 *        .post('/user')
	 *        .send({ name: 'tj' })
	 *        .end(function(res){});
	 *
	 *  Or passed to `.send()`:
	 *
	 *      request
	 *        .post('/user')
	 *        .send({ name: 'tj' }, function(res){});
	 *
	 *  Or passed to `.post()`:
	 *
	 *      request
	 *        .post('/user', { name: 'tj' })
	 *        .end(function(res){});
	 *
	 * Or further reduced to a single call for simple cases:
	 *
	 *      request
	 *        .post('/user', { name: 'tj' }, function(res){});
	 *
	 * @param {XMLHTTPRequest} xhr
	 * @param {Object} options
	 * @api private
	 */function p(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;// handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request
// getAllResponseHeaders sometimes falsely returns "" for CORS requests, but
// getResponseHeader still works. so we get content-type even if getting
// other headers fails.
1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=d(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body=null===this.text&&e._responseType?this.xhr.response:"HEAD"==this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}/**
	 * Initialize a new `Request` with the given `method` and `url`.
	 *
	 * @param {String} method
	 * @param {String} url
	 * @api public
	 */function c(e,t){var o=this;// preserves header name case
// coerces header names to lowercase
this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var t=null,r=null;try{r=new p(o)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,o.xhr?(t.rawResponse="undefined"==typeof o.xhr.responseType?o.xhr.responseText:o.xhr.response,t.status=o.xhr.status?o.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),o.callback(t)}o.emit("response",r);var n;try{o._isResponseOK(r)||(n=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(e){n=e}// #1000 don't catch errors from the callback to avoid double calling it
n?(n.original=t,n.response=r,n.status=r.status,o.callback(n,r)):o.callback(null,r)})}/**
	 * Mixin `Emitter` and `RequestBase`.
	 */ /**
	 * DELETE `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed} [data]
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */function _(e,t,o){var r=m("DELETE",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r}/**
	 * Root reference for iframes.
	 */var u;"undefined"==typeof window?"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),u=te):u=self:u=window;var m=t=e.exports=function(e,o){// callback
return"function"==typeof o?new t.Request("GET",e).end(o):1==arguments.length?new t.Request("GET",e):new t.Request(e,o);// url first
};t.Request=c,m.getXHR=function(){if(u.XMLHttpRequest&&(!u.location||"file:"!=u.location.protocol||!u.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};/**
	 * Removes leading and trailing whitespace, added to support IE.
	 *
	 * @param {String} s
	 * @return {String}
	 * @api private
	 */var y=function(e){return e.trim()};/**
	 * Default MIME type map.
	 *
	 *     superagent.types.xml = 'application/xml';
	 *
	 */ /**
	 * Default serialization map.
	 *
	 *     superagent.serialize['application/xml'] = function(obj){
	 *       return 'generated xml here';
	 *     };
	 *
	 */ /**
	  * Default parsers.
	  *
	  *     superagent.parse['application/xml'] = function(str){
	  *       return { object parsed from str };
	  *     };
	  *
	  */ /**
	 * Parse the given body `str`.
	 *
	 * Used for auto-parsing of bodies. Parsers
	 * are defined on the `superagent.parse` object.
	 *
	 * @param {String} str
	 * @return {Mixed}
	 * @api private
	 */ /**
	 * Return an `Error` representative of this response.
	 *
	 * @return {Error}
	 * @api public
	 */ /**
	 * Expose `Response`.
	 */ /**
	 * Set Content-Type to `type`, mapping values from `request.types`.
	 *
	 * Examples:
	 *
	 *      superagent.types.xml = 'application/xml';
	 *
	 *      request.post('/')
	 *        .type('xml')
	 *        .send(xmlstring)
	 *        .end(callback);
	 *
	 *      request.post('/')
	 *        .type('application/xml')
	 *        .send(xmlstring)
	 *        .end(callback);
	 *
	 * @param {String} type
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Set Accept to `type`, mapping values from `request.types`.
	 *
	 * Examples:
	 *
	 *      superagent.types.json = 'application/json';
	 *
	 *      request.get('/agent')
	 *        .accept('json')
	 *        .end(callback);
	 *
	 *      request.get('/agent')
	 *        .accept('application/json')
	 *        .end(callback);
	 *
	 * @param {String} accept
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Set Authorization field value with `user` and `pass`.
	 *
	 * @param {String} user
	 * @param {String} [pass] optional in case of using 'bearer' as type
	 * @param {Object} options with 'type' property 'auto', 'basic' or 'bearer' (default 'basic')
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Add query-string `val`.
	 *
	 * Examples:
	 *
	 *   request.get('/shoes')
	 *     .query('size=10')
	 *     .query({ color: 'blue' })
	 *
	 * @param {Object|String} val
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Queue the given `file` as an attachment to the specified `field`,
	 * with optional `options` (or filename).
	 *
	 * ``` js
	 * request.post('/upload')
	 *   .attach('content', new Blob(['<a id="a"><b id="b">hey!</b></a>'], { type: "text/html"}))
	 *   .end(callback);
	 * ```
	 *
	 * @param {String} field
	 * @param {Blob|File} file
	 * @param {String|Object} options
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * Invoke the callback with `err` and `res`
	 * and handle arity check.
	 *
	 * @param {Error} err
	 * @param {Response} res
	 * @api private
	 */ /**
	 * Invoke callback with x-domain error.
	 *
	 * @api private
	 */ // This only warns, because the request is still likely to work
// This throws, because it can't send/receive data as expected
/**
	 * Check if `obj` is a host object,
	 * we don't want to serialize these :)
	 *
	 * @param {Object} obj
	 * @return {Boolean}
	 * @api private
	 */ /**
	 * Initiate request, invoking callback `fn(res)`
	 * with an instanceof `Response`.
	 *
	 * @param {Function} fn
	 * @return {Request} for chaining
	 * @api public
	 */ /**
	 * GET `url` with optional callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * HEAD `url` with optional callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * OPTIONS query to `url` with optional callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * PATCH `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed} [data]
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * POST `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed} [data]
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */ /**
	 * PUT `url` with optional `data` and callback `fn(res)`.
	 *
	 * @param {String} url
	 * @param {Mixed|Function} [data] or fn
	 * @param {Function} [fn]
	 * @return {Request}
	 * @api public
	 */m.serializeObject=n,m.parseString=i,m.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},m.serialize={"application/x-www-form-urlencoded":n,"application/json":JSON.stringify},m.parse={"application/x-www-form-urlencoded":i,"application/json":JSON.parse},a(p.prototype),p.prototype._parseBody=function(e){var t=m.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&l(this.type)&&(t=m.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},p.prototype.toError=function(){var e=this.req,t=e.method,o=e.url,r="cannot "+t+" "+o+" ("+this.status+")",n=new Error(r);return n.status=this.status,n.method=t,n.url=o,n},m.Response=p,pr(c.prototype),r(c.prototype),c.prototype.type=function(e){return this.set("Content-Type",m.types[e]||e),this},c.prototype.accept=function(e){return this.set("Accept",m.types[e]||e),this},c.prototype.auth=function(e,t,o){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(o=t,t=""),o||(o={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,o,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},c.prototype.query=function(e){return"string"!=typeof e&&(e=n(e)),e&&this._query.push(e),this},c.prototype.attach=function(e,t,o){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,o||t.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new u.FormData),this._formData},c.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var o=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),o(e,t)},c.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._isHost=function(e){// Native objects stringify to [object File], [object Blob], [object FormData], etc.
return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},c.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||o,this._finalizeQueryString(),this._end()},c.prototype._end=function(){var t=this,o=this.xhr=m.getXHR(),r=this._formData||this._data;this._setTimeouts(),o.onreadystatechange=function(){var e=o.readyState;if(2<=e&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==e){// In IE9, reads to any property (e.g. status) off of an aborted XHR will
// result in the error "Could not complete the operation due to error c00c023f"
var r;try{r=o.status}catch(t){r=0}return r?void t.emit("end"):t.timedout||t._aborted?void 0:t.crossDomainError()}};// progress
var n=function(o,r){0<r.total&&(r.percent=100*(r.loaded/r.total)),r.direction=o,t.emit("progress",r)};if(this.hasListeners("progress"))try{o.onprogress=n.bind(null,"download"),o.upload&&(o.upload.onprogress=n.bind(null,"upload"))}catch(t){// Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.
// Reported here:
// https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context
}// initiate request
try{this.username&&this.password?o.open(this.method,this.url,!0,this.username,this.password):o.open(this.method,this.url,!0)}catch(e){// see #1149
return this.callback(e)}// CORS
// body
if(this._withCredentials&&(o.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){// serialize stuff
var a=this._header["content-type"],s=this._serializer||m.serialize[a?a.split(";")[0]:""];!s&&l(a)&&(s=m.serialize["application/json"]),s&&(r=s(r))}// set header fields
for(var i in this.header)null!=this.header[i]&&this.header.hasOwnProperty(i)&&o.setRequestHeader(i,this.header[i]);return this._responseType&&(o.responseType=this._responseType),this.emit("request",this),o.send("undefined"==typeof r?null:r),this},m.agent=function(){return new yr},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){yr.prototype[e.toLowerCase()]=function(t,o){var r=new m.Request(e,t);return this._setDefaults(r),o&&r.end(o),r}}),yr.prototype.del=yr.prototype["delete"],m.get=function(e,t,o){var r=m("GET",e);return"function"==typeof t&&(o=t,t=null),t&&r.query(t),o&&r.end(o),r},m.head=function(e,t,o){var r=m("HEAD",e);return"function"==typeof t&&(o=t,t=null),t&&r.query(t),o&&r.end(o),r},m.options=function(e,t,o){var r=m("OPTIONS",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},m.del=_,m["delete"]=_,m.patch=function(e,t,o){var r=m("PATCH",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},m.post=function(e,t,o){var r=m("POST",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},m.put=function(e,t,o){var r=m("PUT",e);return"function"==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r}}),fr=gr.Request,br=o(function(e){/**
	 * Constructor to create a storage for our `EE` objects.
	 * An `Events` instance is a plain object whose properties are event names.
	 *
	 * @constructor
	 * @private
	 */function t(){}//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
/**
	 * Representation of a single event listener.
	 *
	 * @param {Function} fn The listener function.
	 * @param {*} context The context to invoke the listener with.
	 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
	 * @constructor
	 * @private
	 */function o(e,t,o){this.fn=e,this.context=t,this.once=o||!1}/**
	 * Add a listener for a given event.
	 *
	 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn The listener function.
	 * @param {*} context The context to invoke the listener with.
	 * @param {Boolean} once Specify if the listener is a one-time listener.
	 * @returns {EventEmitter}
	 * @private
	 */function r(e,t,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,a),i=d?d+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],s]:e._events[i].push(s):(e._events[i]=s,e._eventsCount++),e}/**
	 * Clear event by name.
	 *
	 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
	 * @param {(String|Symbol)} evt The Event name.
	 * @private
	 */function n(e,o){0==--e._eventsCount?e._events=new t:delete e._events[o]}/**
	 * Minimal `EventEmitter` interface that is molded against the Node.js
	 * `EventEmitter` interface.
	 *
	 * @constructor
	 * @public
	 */function a(){this._events=new t,this._eventsCount=0}/**
	 * Return an array listing the events for which the emitter has registered
	 * listeners.
	 *
	 * @returns {Array}
	 * @public
	 */var s=Object.prototype.hasOwnProperty,d="~";/**
	 * Return the listeners registered for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @returns {Array} The registered listeners.
	 * @public
	 */ /**
	 * Return the number of listeners listening to a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @returns {Number} The number of listeners.
	 * @public
	 */ /**
	 * Calls each of the listeners registered for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @returns {Boolean} `true` if the event had listeners, else `false`.
	 * @public
	 */ /**
	 * Add a listener for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn The listener function.
	 * @param {*} [context=this] The context to invoke the listener with.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ /**
	 * Add a one-time listener for a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn The listener function.
	 * @param {*} [context=this] The context to invoke the listener with.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ /**
	 * Remove the listeners of a given event.
	 *
	 * @param {(String|Symbol)} event The event name.
	 * @param {Function} fn Only remove the listeners that match this function.
	 * @param {*} context Only remove the listeners that have this context.
	 * @param {Boolean} once Only remove one-time listeners.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ /**
	 * Remove all listeners, or those of the specified event.
	 *
	 * @param {(String|Symbol)} [event] The event name.
	 * @returns {EventEmitter} `this`.
	 * @public
	 */ //
// Alias methods names because people roll like that.
//
//
// Expose the prefix.
//
//
// Allow `EventEmitter` to be imported as module namespace.
//
Object.create&&(t.prototype=Object.create(null),!new t().__proto__&&(d=!1)),a.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)s.call(e,t)&&o.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=d?d+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,n=o.length,a=Array(n);r<n;r++)a[r]=o[r].fn;return a},a.prototype.listenerCount=function(e){var t=d?d+e:e,o=this._events[t];return o?o.fn?1:o.length:0},a.prototype.emit=function(e,t,o,r,n,a){var s=d?d+e:e;if(!this._events[s])return!1;var l,p,c=this._events[s],_=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),_){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,o),!0;case 4:return c.fn.call(c.context,t,o,r),!0;case 5:return c.fn.call(c.context,t,o,r,n),!0;case 6:return c.fn.call(c.context,t,o,r,n,a),!0;}for(p=1,l=Array(_-1);p<_;p++)l[p-1]=arguments[p];c.fn.apply(c.context,l)}else{var u,m=c.length;for(p=0;p<m;p++)switch(c[p].once&&this.removeListener(e,c[p].fn,void 0,!0),_){case 1:c[p].fn.call(c[p].context);break;case 2:c[p].fn.call(c[p].context,t);break;case 3:c[p].fn.call(c[p].context,t,o);break;case 4:c[p].fn.call(c[p].context,t,o,r);break;default:if(!l)for(u=1,l=Array(_-1);u<_;u++)l[u-1]=arguments[u];c[p].fn.apply(c[p].context,l);}}return!0},a.prototype.on=function(e,t,o){return r(this,e,t,o,!1)},a.prototype.once=function(e,t,o){return r(this,e,t,o,!0)},a.prototype.removeListener=function(e,t,o,r){var a=d?d+e:e;if(!this._events[a])return this;if(!t)return n(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||o&&s.context!==o||n(this,a);else{for(var l=0,p=[],c=s.length;l<c;l++)(s[l].fn!==t||r&&!s[l].once||o&&s[l].context!==o)&&p.push(s[l]);//
// Reset the array, or remove it completely if we have no more listeners.
//
p.length?this._events[a]=1===p.length?p[0]:p:n(this,a)}return this},a.prototype.removeAllListeners=function(e){var o;return e?(o=d?d+e:e,this._events[o]&&n(this,o)):(this._events=new t,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=d,a.EventEmitter=a,e.exports=a}),Cr={/** 华北节点 */NorthChina:0,/** 华东节点 */EastChina:1,/** 美国节点 */NorthAmerica:2},Or={/**
	               * 连接成功
	               * @event Play#CONNECTED
	               */CONNECTED:"connected",/**
	                           * 连接失败
	                           *
	                           * @event Play#CONNECT_FAILED
	                           * @param {Object} payload
	                           * @param {Number} payload.code
	                           * @param {String} payload.detail
	                           */CONNECT_FAILED:"connectFailed",/**
	                                    * 断开连接
	                                    * @event Play#DISCONNECTED
	                                    */DISCONNECTED:"disconnected",/**
	                                 * 加入到大厅
	                                 * @event Play#LOBBY_JOINED
	                                 */LOBBY_JOINED:"lobbyJoined",/**
	                                * 离开大厅
	                                * @event Play#LOBBY_LEFT
	                                */LOBBY_LEFT:"lobbyLeft",/**
	                            * 大厅房间列表变化
	                            * @event Play#LOBBY_ROOM_LIST_UPDATED
	                            */LOBBY_ROOM_LIST_UPDATED:"lobbyRoomListUpdate",/**
	                                                   * 创建房间成功
	                                                   * @event Play#ROOM_CREATED
	                                                   */ROOM_CREATED:"roomCreated",/**
	                                * 创建房间失败
	                                * @event Play#ROOM_CREATE_FAILED
	                                * @param {Object} payload
	                                * @param {Number} payload.code
	                                * @param {String} payload.detail
	                                */ROOM_CREATE_FAILED:"roomCreateFailed",/**
	                                           * 加入房间成功
	                                           * @event Play#ROOM_JOINED
	                                           */ROOM_JOINED:"roomJoined",/**
	                              * 加入房间失败
	                              * @event Play#ROOM_JOIN_FAILED
	                              */ROOM_JOIN_FAILED:"roomJoinFailed",/**
	                                       * 有新玩家加入房间
	                                       * @event Play#PLAYER_ROOM_JOINED
	                                       * @param {Object} payload
	                                       * @param {Player} payload.newPlayer
	                                       */PLAYER_ROOM_JOINED:"newPlayerJoinedRoom",/**
	                                              * 有玩家离开房间
	                                              * @event Play#PLAYER_ROOM_LEFT
	                                              * @param {Object} payload
	                                              * @param {Player} payload.leftPlayer
	                                              */PLAYER_ROOM_LEFT:"playerLeftRoom",/**
	                                       * 玩家活跃属性变化
	                                       * @event Play#PLAYER_ACTIVITY_CHANGED
	                                       * @param {Object} payload
	                                       * @param {Player} payload.player
	                                       */PLAYER_ACTIVITY_CHANGED:"playerActivityChanged",/**
	                                                     * 主机变更
	                                                     * @event Play#MASTER_SWITCHED
	                                                     * @param {Object} payload
	                                                     * @param {Player} payload.newMaster
	                                                     */MASTER_SWITCHED:"masterSwitched",/**
	                                      * 房间「开启 / 关闭」
	                                      * @event Play#ROOM_OPEN_CHANGED
	                                      * @param {Object} payload
	                                      * @param {Boolean} payload.opened
	                                      */ROOM_OPEN_CHANGED:"roomOpenChanged",/**
	                                         * 房间「可见 / 不可见」
	                                         * @event Play#ROOM_VISIBLE_CHANGED
	                                         * @param {Object} payload
	                                         * @param {Boolean} payload.visible
	                                         */ROOM_VISIBLE_CHANGED:"roomVisibleChanged",/**
	                                               * 离开房间
	                                               * @event Play#ROOM_LEFT
	                                               */ROOM_LEFT:"roomLeft",/**
	                          * 房间自定义属性变化
	                          * @event Play#ROOM_CUSTOM_PROPERTIES_CHANGED
	                          * @param {Object} payload
	                          * @param {Object} payload.changedProps
	                          */ROOM_CUSTOM_PROPERTIES_CHANGED:"roomCustomPropertiesChanged",/**
	                                                                  * 玩家自定义属性变化
	                                                                  * @event Play#PLAYER_CUSTOM_PROPERTIES_CHANGED
	                                                                  * @param {Object} payload
	                                                                  * @param {Player} payload.player
	                                                                  * @param {Object} payload.changedProps
	                                                                  */PLAYER_CUSTOM_PROPERTIES_CHANGED:"playerCustomPropertiesChanged",/**
	                                                                      * 自定义事件
	                                                                      * @event Play#CUSTOM_EVENT
	                                                                      * @param {Object} payload
	                                                                      * @param {Number|String} payload.eventId
	                                                                      * @param {Object} payload.eventData
	                                                                      * @param {Number} payload.senderId
	                                                                      */CUSTOM_EVENT:"customEvent",/**
	                                * 错误事件
	                                * @event Play#ERROR
	                                * @param {Object} payload
	                                * @param {Number} payload.code
	                                * @param {String} payload.detail
	                                */ERROR:"error"},hr=function(){function e(t){Jo(this,e),this._play=t,this._userId="",this._actorId=-1}return Qo(e,[{key:"_initWithJSONObject",value:function(e){this._userId=e.pid,this._actorId=e.actorId,this.properties=e.attr?e.attr:{}}/**
	       * 玩家 ID
	       * @type {string}
	       * @readonly
	       */},{key:"isLocal",/**
	                                * 判断是不是当前客户端玩家
	                                * @return {Boolean}
	                                */value:function(){return-1!==this._actorId&&this._play._player._actorId===this._actorId}/**
	       * 判断是不是主机玩家
	       * @return {Boolean}
	       */},{key:"isMaster",value:function(){return-1!==this._actorId&&this._play._room.masterId===this._actorId}/**
	       * 判断是不是活跃状态
	       * @return {Boolean}
	       */},{key:"isActive",value:function(){return this.active}/**
	       * 设置玩家的自定义属性
	       * @param {Object} properties 自定义属性
	       * @param {Object} [opts] 设置选项
	       * @param {Object} [opts.expectedValues] 期望属性，用于 CAS 检测
	       */},{key:"setCustomProperties",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.expectedValues,r=void 0===o?null:o;this._play._setPlayerCustomProperties(this._actorId,e,r)}/**
	       * @deprecated
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"getCustomProperties",value:function(){return this.properties}/**
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"_setActive",// 设置活跃状态
value:function(e){this.active=e}},{key:"_mergeProperties",value:function(e){this.properties=Ho(this.properties,e)}},{key:"userId",get:function(){return this._userId}/**
	                                                                      * 房间玩家 ID
	                                                                      * @type {number}
	                                                                      * @readonly
	                                                                      */},{key:"actorId",get:function(){return this._actorId}},{key:"CustomProperties",get:function(){return this.properties}}],[{key:"_newFromJSONObject",value:function(t,o){var r=new e(t);return r._initWithJSONObject(o),r}}]),e}(),Er=function(){function e(t){Jo(this,e),this._roomName=t.cid,this._maxPlayerCount=t.maxMembers,this._expectedUserIds=t.expectMembers,this._emptyRoomTtl=t.emptyRoomTtl,this._playerTtl=t.playerTtl,this._playerCount=t.playerCount,t.attr&&(this._customRoomProperties=t.attr)}/**
	     * 房间名称
	     * @type {string}
	     * @readonly
	     */return Qo(e,[{key:"roomName",get:function(){return this._roomName}/**
	       * 房间最大玩家数
	       * @type {number}
	       * @readonly
	       */},{key:"maxPlayerCount",get:function(){return this._maxPlayerCount}/**
	       * 邀请好友 ID 数组
	       * @type {Array.<string>}
	       * @readonly
	       */},{key:"expectedUserIds",get:function(){return this._expectedUserIds}/**
	       * 房间置空后销毁时间（秒）
	       * @type {number}
	       * @readonly
	       */},{key:"emptyRoomTtl",get:function(){return this._emptyRoomTtl}/**
	       * 玩家离线后踢出房间时间（秒）
	       * @type {number}
	       * @readonly
	       */},{key:"playerTtl",get:function(){return this._playerTtl}/**
	       * 当前房间玩家数量
	       * @type {number}
	       * @readonly
	       */},{key:"playerCount",get:function(){return this._playerCount}/**
	       * 房间属性
	       * @type {Object}
	       * @readonly
	       */},{key:"customRoomProperties",get:function(){return this._customRoomProperties}}]),e}(),Sr=o(function(e,t){t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(Ko);t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}),Tr=t(Sr),vr=function(e,t){t=t||{};var o=typeof e;if("string"==o&&0<e.length)return l(e);if("number"==o&&!1===isNaN(e))return t.long?c(e):p(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},kr=o(function(e,t){/**
	 * Select a color.
	 * @param {String} namespace
	 * @return {Number}
	 * @api private
	 */function o(e){var o,r=0;for(o in e)r=(r<<5)-r+e.charCodeAt(o),r|=0;return t.colors[Math.abs(r)%t.colors.length]}/**
	 * Create a debugger with the given `namespace`.
	 *
	 * @param {String} namespace
	 * @return {Function}
	 * @api public
	 */function r(e){function r(){// disabled?
if(r.enabled){var e=r,o=+new Date,n=o-(a||o);// set `diff` timestamp
e.diff=n,e.prev=a,e.curr=o,a=o;for(var s=Array(arguments.length),d=0;d<s.length;d++)s[d]=arguments[d];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");// apply any `formatters` transformations
var l=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(o,r){// if we encounter an escaped % then don't increase the array index
if("%%"===o)return o;l++;var n=t.formatters[r];if("function"==typeof n){var a=s[l];o=n.call(e,a),s.splice(l,1),l--}return o}),t.formatArgs.call(e,s);var p=r.log||t.log||console.log.bind(console);p.apply(e,s)}}var a;return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=o(e),r.destroy=n,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function n(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}/**
	 * Enables a debug mode by namespaces. This can include modes
	 * separated by a colon and wildcards.
	 *
	 * @param {String} namespaces
	 * @api public
	 */function a(e){t.save(e),t.names=[],t.skips=[];var o,r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(o=0;o<n;o++)r[o]&&(// ignore empty strings
e=r[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(o=0;o<t.instances.length;o++){var a=t.instances[o];a.enabled=t.enabled(a.namespace)}}/**
	 * Disable debug output.
	 *
	 * @api public
	 */function s(){t.enable("")}/**
	 * Returns true if the given mode name is enabled, false otherwise.
	 *
	 * @param {String} name
	 * @return {Boolean}
	 * @api public
	 */function i(e){if("*"===e[e.length-1])return!0;var o,r;for(o=0,r=t.skips.length;o<r;o++)if(t.skips[o].test(e))return!1;for(o=0,r=t.names.length;o<r;o++)if(t.names[o].test(e))return!0;return!1}/**
	 * Coerce `val`.
	 *
	 * @param {Mixed} val
	 * @return {Mixed}
	 * @api private
	 */ /**
	 * This is the common logic for both the Node.js and web browser
	 * implementations of `debug()`.
	 *
	 * Expose `debug()` as the module.
	 */ /**
	 * Active `debug` instances.
	 */ /**
	 * The currently active debug mode names, and names to skip.
	 */ /**
	 * Map of special "%n" handling functions, for the debug "format" argument.
	 *
	 * Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
	 */t=e.exports=r.debug=r["default"]=r,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=s,t.enable=a,t.enabled=i,t.humanize=vr,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),Pr=kr.coerce,Rr=kr.disable,Ir=kr.enable,Mr=kr.enabled,Lr=kr.humanize,Nr=kr.instances,xr=kr.names,Ar=kr.skips,Fr=kr.formatters,Dr=o(function(e,t){/**
	 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
	 * and the Firebug extension (any Firefox version) are known
	 * to support "%c" CSS customizations.
	 *
	 * TODO: add a `localStorage` variable to explicitly enable/disable colors
	 */ /**
	 * Colorize log arguments if enabled.
	 *
	 * @api public
	 */function o(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+t.humanize(this.diff),!!o){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");// the final "%c" is somewhat tricky, because there could be other
// arguments passed either before or after the %c, so we need to
// figure out the correct index to insert the CSS into
var n=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"===e||(n++,"%c"===e&&(a=n))}),e.splice(a,0,r)}}/**
	 * Invokes `console.log()` when available.
	 * No-op when `console.log` is not a "function".
	 *
	 * @api public
	 */ /**
	 * Save `namespaces`.
	 *
	 * @param {String} namespaces
	 * @api private
	 */function r(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(t){}}/**
	 * Load `namespaces`.
	 *
	 * @return {String} returns the previously persisted debug modes
	 * @api private
	 */function n(){var e;try{e=t.storage.debug}catch(t){}// If debug isn't set in LS, and we're in Electron, try to load $DEBUG
return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}/**
	 * Enable namespaces listed in `localStorage.debug` initially.
	 */ /**
	 * This is the web browser implementation of `debug()`.
	 *
	 * Expose `debug()` as the module.
	 */ /**
	 * Colors.
	 */ /**
	 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
	 */t=e.exports=kr,t.log=function(){// this hackery is required for IE8/9, where
// the `console.log` function doesn't have 'apply'
return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=o,t.save=r,t.load=n,t.useColors=function(){// NB: In an Electron preload script, document will be defined but not fully
// initialized. Since we know we're in Chrome, we'll just detect this case
// explicitly
return!!("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||// is firebug? http://stackoverflow.com/a/398120/376773
"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||// is firefox >= v31?
// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||// double check webkit in userAgent just in case we are in a worker
"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));// Internet Explorer and Edge do not support colors.
// is webkit? http://stackoverflow.com/a/16459606/376773
// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:/**
	 * Localstorage attempts to return the localstorage.
	 *
	 * This is necessary because safari throws
	 * when a user disables cookies/localstorage
	 * and you attempt to access it.
	 *
	 * @return {LocalStorage}
	 * @api private
	 */function(){try{return window.localStorage}catch(t){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}),wr=Dr.log,jr=Dr.formatArgs,Gr=Dr.save,Br=Dr.load,Yr=Dr.useColors,Hr=Dr.storage,Wr=Dr.colors,qr=Dr("Play"),Vr={Debug:"Debug",Warn:"Warn",Error:"Error"},Ur=(mr={},Tr(mr,Vr.Debug,qr),Tr(mr,Vr.Warn,console.warn.bind(console)),Tr(mr,Vr.Error,console.error.bind(console)),mr),Jr={/**
	                   * 关闭
	                   */CLOSED:"CLOSED",/**
	                     * 连接中
	                     */CONNECTING:"CONNECTING",/**
	                             * 大厅连接成功
	                             */LOBBY_OPEN:"LOBBY_OPEN",/**
	                             * 房间连接成功
	                             */GAME_OPEN:"GAME_OPEN",/**
	                           * 关闭中
	                           */CLOSING:"CLOSING"},zr=Ht.f,$r=function(e){return function(t){for(var o,r=Fe(t),n=$e(r),a=n.length,s=0,d=[];a>s;)zr.call(r,o=n[s++])&&d.push(e?[o,r[o]]:r[o]);return d}}(!1);Me(Me.S,"Object",{values:function(e){return $r(e)}});var Kr=oe.Object.values,Xr=o(function(e){e.exports={default:Kr,__esModule:!0}}),Qr=t(Xr),Zr=function(){function e(t){Jo(this,e),this._play=t}/* eslint no-param-reassign: ["error", { "props": false }] */return Qo(e,[{key:"getPlayer",/**
	                                                                                                        * 根据 actorId 获取 Player 对象
	                                                                                                        * @param {number} actorId 玩家在房间中的 Id
	                                                                                                        * @return {Player}
	                                                                                                        */value:function(e){if("number"!=typeof e)throw new TypeError(e+" is not a number");if(-1===e)return null;var t=this._players[e];if(null===t)throw new Error("player with id:"+e+" not found");return t}/**
	       * 获取房间内的玩家列表
	       * @return {Array.<Player>}
	       * @readonly
	       */},{key:"setCustomProperties",/**
	                                            * 设置房间的自定义属性
	                                            * @param {Object} properties 自定义属性
	                                            * @param {Object} [opts] 设置选项
	                                            * @param {Object} [opts.expectedValues] 期望属性，用于 CAS 检测
	                                            */value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.expectedValues,r=void 0===o?null:o;this._play._setRoomCustomProperties(e,r)}/**
	       * @deprecated
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"getCustomProperties",value:function(){return this._properties}/**
	       * 获取自定义属性
	       * @return {Object}
	       */},{key:"_addPlayer",value:function(e){if(!(e instanceof hr))throw new TypeError(e+" is not a Player");this._players[e.actorId]=e}},{key:"_removePlayer",value:function(e){delete this._players[e]}},{key:"_mergeProperties",value:function(e){this._properties=Ho(this._properties,e)}},{key:"name",/**
	                         * 房间名称
	                         * @type {string}
	                         * @readonly
	                         */get:function(){return this._name}/**
	                                                                     * 房间是否开启
	                                                                     * @type {boolean}
	                                                                     * @readonly
	                                                                     */},{key:"opened",get:function(){return this._opened}/**
	                                                                                                                                        * 房间是否可见
	                                                                                                                                        * @type {boolean}
	                                                                                                                                        * @readonly
	                                                                                                                                        */},{key:"visible",get:function(){return this._visible}/**
	                                                                                                                                                                                                             * 房间允许的最大玩家数量
	                                                                                                                                                                                                             * @type {number}
	                                                                                                                                                                                                             * @readonly
	                                                                                                                                                                                                             */},{key:"maxPlayerCount",get:function(){return this._maxPlayerCount}/**
	                                                                                                                                                                                                                                                                                                * 获取房主
	                                                                                                                                                                                                                                                                                                * @readonly
	                                                                                                                                                                                                                                                                                                */},{key:"master",get:function(){return this.getPlayer(this.masterId)}/**
	                                                                                                                                                                                                                                                                                                                                                                                    * 房间主机玩家 ID
	                                                                                                                                                                                                                                                                                                                                                                                    * @type {number}
	                                                                                                                                                                                                                                                                                                                                                                                    * @readonly
	                                                                                                                                                                                                                                                                                                                                                                                    */},{key:"masterId",get:function(){return this._masterActorId}/**
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 邀请的好友 ID 列表
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @type {Array.<string>}
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @readonly
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                */},{key:"expectedUserIds",get:function(){return this._expectedUserIds}},{key:"playerList",get:function(){return Qr(this._players)}},{key:"CustomProperties",get:function(){return this._properties}}],[{key:"_newFromJSONObject",value:function(t,o){var r=new e(t);r._name=o.cid,r._opened=o.open,r._visible=o.visible,r._maxPlayerCount=o.maxMembers,r._masterActorId=o.masterActorId,r._expectedUserIds=o.expectMembers,r._players={};for(var n=0;n<o.members.length;n+=1){var a=o.members[n],s=hr._newFromJSONObject(t,a);s.userId===t.userId&&(t._player=s),r._players[s.actorId]=s}return r._properties=o.attr?o.attr:{},r}}]),e}(),en="0.15.0",tn="https://game-router-cn-e1.leancloud.cn/v1/router",on=null;"undefined"==typeof WebSocket?"undefined"==typeof MozWebSocket?"undefined"==typeof te?"undefined"==typeof window?"undefined"!=typeof self&&(on=self.WebSocket||self.MozWebSocket):on=window.WebSocket||window.MozWebSocket:on=te.WebSocket||te.MozWebSocket:on=MozWebSocket:on=WebSocket;var rn=on,nn={WebSocket:rn},an=// eslint-disable-next-line no-undef
"object"===("undefined"==typeof wx?"undefined":wo(wx))&&"function"==typeof wx.connectSocket,sn=12e4,dn=1e4,ln=function(e){/**
	                                                                      * 初始化客户端
	                                                                      * @param {Object} opts
	                                                                      * @param {String} opts.userId 玩家唯一 Id
	                                                                      * @param {String} opts.appId APP ID
	                                                                      * @param {String} opts.appKey APP KEY
	                                                                      * @param {Number} opts.region 节点地区
	                                                                      * @param {Boolean} [opts.ssl] 是否使用 ssl，仅在 Client Engine 中可用
	                                                                      * @param {String} [opts.gameVersion] 游戏版本号
	                                                                      */function t(e){Jo(this,t);var o=er(this,(t.__proto__||Vo(t)).call(this));if("string"!=typeof e.appId)throw new TypeError(e.appId+" is not a string");if("string"!=typeof e.appKey)throw new TypeError(e.appKey+" is not a string");if("number"!=typeof e.region)throw new TypeError(e.region+" is not a number");if("string"!=typeof e.userId)throw new TypeError(e.userId+" is not a string");if(void 0!==e.feature&&"string"!=typeof e.feature)throw new TypeError(e.feature+" is not a string");if(void 0!==e.ssl&&"boolean"!=typeof e.ssl)throw new TypeError(e.ssl+" is not a boolean");if(void 0!==e.gameVersion&&"string"!=typeof e.gameVersion)throw new TypeError(e.gameVersion+" is not a string");/**
	       * 玩家 ID
	       * @type {string}
	       */return o.userId=e.userId,o._appId=e.appId,o._appKey=e.appKey,o._region=e.region,o._feature=e.feature,!1===e.ssl&&(o._insecure=!0),o.gameVersion=e.gameVersion?e.gameVersion:"0.0.1",o.reset(),o}/**
	     * 建立连接
	     */return lr(t,e),Qo(t,[{key:"connect",value:function(){var e=this;// 判断是否有 userId
if(null===this.userId)throw new Error("userId is null");if(this._playState===Jr.CONNECTING||this._playState===Jr.LOBBY_OPEN||this._playState===Jr.GAME_OPEN)return void m("Current play state: "+this._playState+", ignore");// 判断是否已经在等待连接
if(this._connectTimer)return void m("waiting for connect");// 判断连接时间
var t=new Date().getTime();if(t<this._nextConnectTimestamp){var o=this._nextConnectTimestamp-t;u("wait time: "+o),this._connectTimer=setTimeout(function(){u("connect time out"),e._connect(),clearTimeout(e._connectTimer),e._connectTimer=null},o)}else this._connect()}},{key:"_connect",value:function(){var e=this;if(this.gameVersion&&"string"!=typeof this.gameVersion)throw new TypeError(this.gameVersion+" is not a string");var t=tn;this._region===Cr.NorthChina?t="https://game-router-cn-n1.leancloud.cn/v1/router":this._region===Cr.EastChina?t=tn:this._region===Cr.NorthAmerica&&(t="https://game-router-us-w1.leancloud.cn/v1/router"),this._playState=Jr.CONNECTING;var o={appId:this._appId,sdkVersion:en};// 使用设置覆盖 SDK 判断的 feature
this._feature?o.feature=this._feature:an&&(o.feature="wechat"),this._insecure&&(o.insecure=this._insecure),this._httpReq=gr.get(t).query(o).end(function(t,o){var r=Math.pow;if(t)y(t),e._connectFailedCount+=1,e._nextConnectTimestamp=Date.now()+1e3*r(2,e._connectFailedCount),e.emit(Or.CONNECT_FAILED,{code:-1,detail:"Game router connect failed"});else{var n=JSON.parse(o.text);u(o.text),e._connectFailedCount=0,e._nextConnectTimestamp=0,clearTimeout(e._connectTimer),e._connectTimer=null,e._primaryServer=n.server,e._secondaryServer=n.secondary,e._masterServer=e._primaryServer,e._serverValidTimeStamp=Date.now()+1e3*n.ttl,e._connectToMaster()}})}/**
	       * 重新连接
	       */},{key:"reconnect",value:function(){var e=Date.now();e>this._serverValidTimeStamp?this.connect(this.gameVersion):this._connectToMaster()}/**
	       * 重新连接并自动加入房间
	       */},{key:"reconnectAndRejoin",value:function(){if(null===this._cachedRoomMsg)throw new Error("no cache room info");if(void 0===this._cachedRoomMsg.cid)throw new Error("not cache room name");this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:this._cachedRoomMsg.cid,rejoin:!0},this._connectToGame()}/**
	       * 断开连接
	       */},{key:"disconnect",value:function(){var e=this;if(this._playState!==Jr.LOBBY_OPEN&&this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);this._playState=Jr.CLOSING,this._stopPing(),this._stopPong(),this._closeLobbySocket(function(){u("on close lobby socket"),e._closeGameSocket(function(){u("on close game socket"),e._playState=Jr.CLOSED,e.emit(Or.DISCONNECTED),u(e.userId+" disconnect.")})})}/**
	       * 重置
	       */},{key:"reset",value:function(){this._room=null,this._player=null,this._cachedRoomMsg=null,this._playState=Jr.CLOSED,this._masterServer=null,this._gameServer=null,this._msgId=0,this._inLobby=!1,this._lobbyRoomList=null,this._connectFailedCount=0,this._nextConnectTimestamp=0,this._gameToLobby=!1,this._stopConnectTimer(),this._cancelHttp(),this._stopPing(),this._stopPong(),this._closeLobbySocket(),this._closeGameSocket()}/**
	       * 加入大厅
	       */},{key:"joinLobby",value:function(){if(this._playState!==Jr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);var e={cmd:"lobby",op:"add",i:this._getMsgId()};this._sendLobbyMessage(e)}/**
	       * 离开大厅
	       */},{key:"leaveLobby",value:function(){if(this._playState!==Jr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);var e={cmd:"lobby",op:"remove",i:this._getMsgId()};this._sendLobbyMessage(e)}/**
	       * 创建房间
	       * @param {Object} [opts] 创建房间选项
	       * @param {string} [opts.roomName] 房间名称，在整个游戏中唯一，默认值为 null，则由服务端分配一个唯一 Id
	       * @param {Object} [opts.roomOptions] 创建房间选项，默认值为 null
	       * @param {Boolean} [opts.roomOptions.opened] 房间是否打开
	       * @param {Boolean} [opts.roomOptions.visible] 房间是否可见，只有「可见」的房间会出现在房间列表里
	       * @param {Number} [opts.roomOptions.emptyRoomTtl] 房间为空后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.playerTtl] 玩家掉线后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.maxPlayerCount] 最大玩家数量
	       * @param {Object} [opts.roomOptions.customRoomProperties] 自定义房间属性
	       * @param {Array.<string>} [opts.roomOptions.customRoomPropertyKeysForLobby] 在大厅中可获得的房间属性「键」数组
	       * @param {CreateRoomFlag} [opts.roomOptions.flag] 创建房间标记，可多选
	       * @param {Array.<string>} [opts.expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"createRoom",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.roomName,o=void 0===t?null:t,r=e.roomOptions,n=void 0===r?null:r,a=e.expectedUserIds,s=void 0===a?null:a;if(null!==o&&"string"!=typeof o)throw new TypeError(o+" is not a string");if(null!==n&&!(n instanceof Object))throw new TypeError(n+" is not a Object");if(null!==s&&!Array.isArray(s))throw new TypeError(s+" is not an Array with string");if(this._playState!==Jr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);// 缓存 GameServer 创建房间的消息体
// 拷贝房间属性（包括 系统属性和玩家定义属性）
if(this._cachedRoomMsg={cmd:"conv",op:"start",i:this._getMsgId()},o&&(this._cachedRoomMsg.cid=o),n){var i=K(n);this._cachedRoomMsg=Ho(this._cachedRoomMsg,i)}s&&(this._cachedRoomMsg.expectMembers=s);// Router 创建房间的消息体
var d=this._cachedRoomMsg;this._sendLobbyMessage(d)}/**
	       * 加入房间
	       * @param {string} roomName 房间名称
	       * @param {*} [expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"joinRoom",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.expectedUserIds,r=void 0===o?null:o;if("string"!=typeof e)throw new TypeError(e+" is not a string");if(null!==r&&!Array.isArray(r))throw new TypeError(r+" is not an array with string");if(this._playState!==Jr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);// 加入房间的消息体
this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:e},r&&(this._cachedRoomMsg.expectMembers=r);var n=this._cachedRoomMsg;this._sendLobbyMessage(n)}/**
	       * 重新加入房间
	       * @param {string} roomName 房间名称
	       */},{key:"rejoinRoom",value:function(e){if("string"!=typeof e)throw new TypeError(e+" is not a string");if(this._playState!==Jr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:e,rejoin:!0};var t=this._cachedRoomMsg;this._sendLobbyMessage(t)}/**
	       * 随机加入或创建房间
	       * @param {string} roomName 房间名称
	       * @param {Object} [opts] 创建房间选项
	       * @param {Object} [opts.roomOptions] 创建房间选项，默认值为 null
	       * @param {Boolean} [opts.roomOptions.opened] 房间是否打开
	       * @param {Boolean} [opts.roomOptions.visible] 房间是否可见，只有「可见」的房间会出现在房间列表里
	       * @param {Number} [opts.roomOptions.emptyRoomTtl] 房间为空后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.playerTtl] 玩家掉线后，延迟销毁的时间
	       * @param {Number} [opts.roomOptions.maxPlayerCount] 最大玩家数量
	       * @param {Object} [opts.roomOptions.customRoomProperties] 自定义房间属性
	       * @param {Array.<string>} [opts.roomOptions.customRoomPropertyKeysForLobby] 在大厅中可获得的房间属性「键」数组
	       * @param {CreateRoomFlag} [opts.roomOptions.flag] 创建房间标记，可多选
	       * @param {Array.<string>} [opts.expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"joinOrCreateRoom",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.roomOptions,r=void 0===o?null:o,n=t.expectedUserIds,a=void 0===n?null:n;if("string"!=typeof e)throw new TypeError(e+" is not a string");if(this._playState!==Jr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);if(null!==r&&!(r instanceof Object))throw new TypeError(r+" is not a Object");if(null!==a&&!Array.isArray(a))throw new TypeError(a+" is not an array with string");// 拷贝房间参数
if(this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId(),cid:e},null!=r){var s=K(r);this._cachedRoomMsg=Ho(this._cachedRoomMsg,s)}a&&(this._cachedRoomMsg.expectMembers=a);var i={cmd:"conv",op:"add",i:this._getMsgId(),cid:e,createOnNotFound:!0};a&&(i.expectMembers=a),this._sendLobbyMessage(i)}/**
	       * 随机加入房间
	       * @param {Object} [opts] 随机加入房间选项
	       * @param {Object} [opts.matchProperties] 匹配属性，默认值为 null
	       * @param {Array.<string>} [opts.expectedUserIds] 邀请好友 ID 数组，默认值为 null
	       */},{key:"joinRandomRoom",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.matchProperties,o=void 0===t?null:t,r=e.expectedUserIds,n=void 0===r?null:r;if(null!==o&&"object"!==("undefined"==typeof o?"undefined":wo(o)))throw new TypeError(o+" is not an object");if(null!==n&&!Array.isArray(n))throw new TypeError(n+" is not an array with string");if(this._playState!==Jr.LOBBY_OPEN)throw new Error("error play state: "+this._playState);this._cachedRoomMsg={cmd:"conv",op:"add",i:this._getMsgId()},o&&(this._cachedRoomMsg.expectAttr=o),n&&(this._cachedRoomMsg.expectMembers=n);var a={cmd:"conv",op:"add-random"};o&&(a.expectAttr=o),n&&(a.expectMembers=n),this._sendLobbyMessage(a)}/**
	       * 设置房间开启 / 关闭
	       * @param {Boolean} opened 是否开启
	       */},{key:"setRoomOpened",value:function(e){if("boolean"!=typeof e)throw new TypeError(e+" is not a boolean value");if(null===this._room)throw new Error("room is null");if(this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);var t={cmd:"conv",op:"open",i:this._getMsgId(),toggle:e};this._sendGameMessage(t)}/**
	       * 设置房间可见 / 不可见
	       * @param {Boolean} visible 是否可见
	       */},{key:"setRoomVisible",value:function(e){if("boolean"!=typeof e)throw new TypeError(e+" is not a boolean value");if(null===this._room)throw new Error("room is null");if(this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);var t={cmd:"conv",op:"visible",i:this._getMsgId(),toggle:e};this._sendGameMessage(t)}/**
	       * 设置房主
	       * @param {number} newMasterId 新房主 ID
	       */},{key:"setMaster",value:function(e){if("number"!=typeof e)throw new TypeError(e+" is not a number");if(null===this._room)throw new Error("room is null");if(this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);var t={cmd:"conv",op:"update-master-client",i:this._getMsgId(),masterActorId:e};this._sendGameMessage(t)}/**
	       * 发送自定义消息
	       * @param {number|string} eventId 事件 ID
	       * @param {Object} eventData 事件参数
	       * @param {Object} options 发送事件选项
	       * @param {ReceiverGroup} options.receiverGroup 接收组
	       * @param {Array.<number>} options.targetActorIds 接收者 Id。如果设置，将会覆盖 receiverGroup
	       */},{key:"sendEvent",value:function(e,t,o){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError(e+" is not a string or number");if("object"!==("undefined"==typeof t?"undefined":wo(t)))throw new TypeError(t+" is not an object");if(!(o instanceof Object))throw new TypeError(o+" is not a Object");if(void 0===o.receiverGroup&&void 0===o.targetActorIds)throw new TypeError("receiverGroup and targetActorIds are null");if(null===this._room)throw new Error("room is null");if(null===this._player)throw new Error("player is null");if(this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);var r={cmd:"direct",i:this._getMsgId(),eventId:e,msg:t,receiverGroup:o.receiverGroup,toActorIds:o.targetActorIds};this._sendGameMessage(r)}/**
	       * 离开房间
	       */},{key:"leaveRoom",value:function(){if(this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);var e={cmd:"conv",op:"remove",i:this._getMsgId(),cid:this.room.name};this._sendGameMessage(e)}/**
	       * 获取当前所在房间
	       * @return {Room}
	       * @readonly
	       */},{key:"_setRoomCustomProperties",// 设置房间属性
value:function(e,t){if("object"!==("undefined"==typeof e?"undefined":wo(e)))throw new TypeError(e+" is not an object");if(t&&"object"!==("undefined"==typeof t?"undefined":wo(t)))throw new TypeError(t+" is not an object");if(this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);var o={cmd:"conv",op:"update",i:this._getMsgId(),attr:e};t&&(o.expectAttr=t),this._sendGameMessage(o)}// 设置玩家属性
},{key:"_setPlayerCustomProperties",value:function(e,t,o){if("number"!=typeof e)throw new TypeError(e+" is not a number");if("object"!==("undefined"==typeof t?"undefined":wo(t)))throw new TypeError(t+" is not an object");if(o&&"object"!==("undefined"==typeof o?"undefined":wo(o)))throw new TypeError(o+" is not an object");if(this._playState!==Jr.GAME_OPEN)throw new Error("error play state: "+this._playState);var r={cmd:"conv",op:"update-player-prop",i:this._getMsgId(),targetActorId:e,attr:t};o&&(r.expectAttr=o),this._sendGameMessage(r)}// 开始大厅会话
},{key:"_lobbySessionOpen",value:function(){var e={cmd:"session",op:"open",i:this._getMsgId(),appId:this._appId,peerId:this.userId,sdkVersion:en,gameVersion:this.gameVersion};this._sendLobbyMessage(e)}// 开始房间会话
},{key:"_gameSessionOpen",value:function(){var e={cmd:"session",op:"open",i:this._getMsgId(),appId:this._appId,peerId:this.userId,sdkVersion:en,gameVersion:this.gameVersion};this._sendGameMessage(e)}// 发送大厅消息
},{key:"_sendLobbyMessage",value:function(e){this._send(this._lobbyWS,e,"Lobby",sn)}// 发送房间消息
},{key:"_sendGameMessage",value:function(e){this._send(this._gameWS,e,"Game ",dn)}// 发送消息
},{key:"_send",value:function(e,t,o,r){var n=this;if("object"!==("undefined"==typeof t?"undefined":wo(t)))throw new TypeError(t+" is not an object");var a=ie(t);u(this.userId+" "+o+" msg: "+t.op+" \n-> "+a);var s=nn.WebSocket;e.readyState===s.OPEN?(e.send(a),this._stopPing(),this._ping=setTimeout(function(){u("ping");n._send(e,{},o,r)},r)):(this._stopPing(),this._stopPong())}// 连接至大厅服务器
},{key:"_connectToMaster",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this._playState=Jr.CONNECTING,this._gameToLobby=t;var o=nn.WebSocket;this._lobbyWS=new o(this._masterServer),this._lobbyWS.onopen=function(){u("Lobby websocket opened"),e._lobbySessionOpen()},this._lobbyWS.onmessage=function(t){e._stopPong(),e._startPongListener(e._lobbyWS,sn),P(e,t)},this._lobbyWS.onclose=function(){u("Lobby websocket closed"),e._playState===Jr.CONNECTING?e._masterServer===e._secondaryServer?e.emit(Or.CONNECT_FAILED,{code:-2,detail:"Lobby socket connect failed"}):(e._masterServer=e._secondaryServer,e._connectToMaster()):(e._playState=Jr.CLOSED,e.emit(Or.DISCONNECTED)),e._stopPing(),e._stopPong()},this._lobbyWS.onerror=function(e){y(e)}}// 连接至游戏服务器
},{key:"_connectToGame",value:function(){var e=this;this._playState=Jr.CONNECTING;var t=nn.WebSocket;this._gameWS=new t(this._gameServer),this._gameWS.onopen=function(){u("Game websocket opened"),e._gameSessionOpen()},this._gameWS.onmessage=function(t){e._stopPong(),e._startPongListener(e._gameWS,dn),$(e,t)},this._gameWS.onclose=function(){u("Game websocket closed"),e._playState===Jr.CONNECTING?e.emit(Or.CONNECT_FAILED,{code:-2,detail:"Game socket connect failed"}):(e._playState=Jr.CLOSED,e.emit(Or.DISCONNECTED)),e._stopPing(),e._stopPong()},this._gameWS.onerror=function(e){y(e)}}},{key:"_getMsgId",value:function(){return this._msgId+=1,this._msgId}},{key:"_stopConnectTimer",value:function(){this._connectTimer&&(clearTimeout(this._connectTimer),this._connectTimer=null)}},{key:"_stopPing",value:function(){this._ping&&(clearTimeout(this._ping),this._ping=null)}},{key:"_stopPong",value:function(){this._pong&&(clearTimeout(this._pong),this._pong=null)}},{key:"_startPongListener",value:function(e,t){var o=this;this._pong=setTimeout(function(){o._send(e,{},"",t),o._pong=setTimeout(function(){e.close()},t)},t*2)}},{key:"_cancelHttp",value:function(){this._httpReq&&this._httpReq.abort()}},{key:"_closeLobbySocket",value:function(e){X(this._lobbyWS,e),this._lobbyWS=null}},{key:"_closeGameSocket",value:function(e){X(this._gameWS,e),this._gameWS=null}},{key:"room",get:function(){return this._room}/**
	                                                                  * 获取当前玩家
	                                                                  * @return {Player}
	                                                                  * @readonly
	                                                                  */},{key:"player",get:function(){return this._player}/**
	                                                                                                                                     * 获取房间列表
	                                                                                                                                     * @return {Array.<LobbyRoom>}
	                                                                                                                                     * @readonly
	                                                                                                                                     */},{key:"lobbyRoomList",get:function(){return this._lobbyRoomList}}]),t}(br);e.Client=ln,e.Region=Cr,e.Room=Zr,e.Player=hr,e.Event=Or,e.ReceiverGroup={/**
	                       * 其他人（除了自己之外的所有人）
	                       */Others:0,/**
	              * 所有人（包括自己）
	              */All:1,/**
	           * 主机客户端
	           */MasterClient:2},e.CreateRoomFlag={/**
	                        * Master 掉线后固定 Master
	                        */FixedMaster:1,/**
	                   * 只允许 Master 设置房间属性
	                   */MasterUpdateRoomProperties:2},e.setAdapters=/**
	                           * 设置适配器
	                           * @param {Object} newAdapters
	                           * @param {Function} newAdapters.WebSocketAdapter WebSocket 适配器，Cocos Creator 打包 android 平台时需要传入 CA 证书
	                           */function(e){Ho(nn,e)},e.LogLevel=Vr,e.setLogger=function(e){Ho(Ur,e)},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=play.min.js.map
